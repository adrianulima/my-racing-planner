import{S as I,j as e,l,U as L,R as O,r as c,V as M,T as C,N as b,W as $,H as k,f as N,A as W,X as B,Y as H,E as f,u as _}from"./index-DiBOnLUr.js";import{S as z,L as U,u as V,C as J}from"./star-checkbox-B-T2xnmg.js";import{j as R,h as i,k as o,I as v,P as E,a as D,b as F,g as P,p as X,f as Y}from"./content-checkbox-DJwcmYtx.js";import{I as q,C as G}from"./infinity-table-DWJK1Cok.js";import{V as K,C as Q}from"./content-name-badge-Cq1jTSVt.js";import{C as Z}from"./icons-B00Uenvm.js";import{f as ee}from"./index-DiS1clUK.js";import{B as A}from"./checkbox-DaoUvj05.js";import{C as T}from"./content-popover-DaBuI9TA.js";import"./cars-By9GStcW.js";const w=Object.values(I).sort((r,n)=>r.license.id-n.license.id||r.name.localeCompare(n.name));function te({list:r,rows:n,filterButton:a}){return e.jsx(q,{list:r,rows:n,cols:9,children:e.jsxs(R,{bgColor:"bg.muted",children:[e.jsx(i,{minWidth:"40px",textAlign:"center",children:a}),e.jsx(i,{minWidth:"60px",textAlign:"center",children:e.jsx(K,{children:"Series Logo"})}),e.jsx(i,{width:"100%",children:"Name"}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:"Setup"}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:"Cars"}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:"Tracks"}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:"Category"}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:"Duration"}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:"License"})]})})}function ne({duration:r,laps:n}){const a=n?`${n} laps`:`${r} min`;return e.jsxs(A,{colorPalette:n?"pink":"purple",children:[e.jsx(l,{icon:n?L:ee,size:"xs"}),a]})}function re({id:r,logo:n,name:a,cars:u,weeks:S,favorite:y,fixed:x,category:d,license:h,color:p,duration:t,laps:g,official:j}){const m=c.useMemo(()=>[...new Set(S.map(s=>s.track.id))],[]);return e.jsxs(R,{bgColor:"transparent",children:[e.jsx(o,{minWidth:"40px",textAlign:"center",children:e.jsx(z,{onClick:s=>s.stopPropagation(),checked:y,onCheckedChange:s=>M(r,!!s.checked)})}),e.jsx(o,{minWidth:"60px",textAlign:"center",children:n&&e.jsx(G,{children:e.jsx(C,{lazyMount:!0,unmountOnExit:!0,content:e.jsx(b,{loading:"lazy",userSelect:"none",draggable:!1,h:"80px",w:"160px",fit:"contain",src:`${v.image}/img/logos/series/${n}`}),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(b,{loading:"lazy",userSelect:"none",draggable:!1,h:"24px",fit:"contain",src:`${v.image}/img/logos/series/${n}`})},n)})}),e.jsx(o,{width:"100%",children:e.jsx(Q,{name:a,children:!j&&e.jsx(A,{colorPalette:"yellow",mr:1,children:"Unranked"})})}),e.jsx(o,{minWidth:"90px",textAlign:"center",children:x&&e.jsx(C,{lazyMount:!0,unmountOnExit:!0,content:"Fixed Setup",showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsxs(A,{variant:"solid",_light:{bg:"gray.600"},children:[e.jsx(l,{icon:$,size:"sm"}),"Fixed"]})})}),e.jsx(o,{minWidth:"90px",textAlign:"center",children:e.jsxs(E,{lazyMount:!0,unmountOnExit:!0,children:[e.jsx(D,{asChild:!0,children:e.jsxs(k,{gap:1,justifyContent:"center",cursor:"pointer",children:[e.jsx(l,{icon:N}),u.length,e.jsx(l,{icon:W})]})}),e.jsxs(F,{p:2,children:[e.jsx(P,{}),e.jsx(T,{content:"cars",list:u})]})]})}),e.jsx(o,{minWidth:"90px",textAlign:"center",children:e.jsxs(E,{lazyMount:!0,unmountOnExit:!0,children:[e.jsx(D,{asChild:!0,children:e.jsxs(k,{gap:1,justifyContent:"center",cursor:"pointer",children:[e.jsx(l,{icon:B}),m.length,e.jsx(l,{icon:W})]})}),e.jsxs(F,{p:2,children:[e.jsx(P,{}),e.jsx(T,{content:"tracks",list:m})]})]})}),e.jsx(o,{minWidth:"90px",textAlign:"center",children:e.jsx(C,{lazyMount:!0,unmountOnExit:!0,content:H[d],showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(Z,{fontSize:"16px",category:d})},`${d}`)}),e.jsx(o,{minWidth:"90px",textAlign:"center",children:e.jsx(ne,{duration:t,laps:g})}),e.jsx(o,{minWidth:"40px",textAlign:"center",children:e.jsx(U,{letter:h,color:p,children:h})})]})}const se=O.memo(re);function ge(){const[r,n]=c.useState(f.all),[a,u]=c.useState(""),[S,y]=c.useState(w),[x,d]=c.useState(!1),h=V(a,500),{favoriteSeries:p}=_();return c.useEffect(()=>{const t=r===f.all?w:w.filter(s=>f[s.category]===r),g=x?t.filter(s=>p.includes(s.id)):t,j=h.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),m=j?g.filter(s=>s.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(j)):g;y(m)},[h,r,x]),e.jsxs(X,{children:[e.jsx(Y,{title:"My Favorite Series",description:"Select the series you wanna see in your season planner"}),e.jsx(J,{tabs:f,tab:r,onTabChange:n,search:a,onSearchChange:u}),e.jsx(te,{filterButton:e.jsx(C,{lazyMount:!0,unmountOnExit:!0,content:"Filter favorite series only",showArrow:!0,openDelay:200,closeDelay:100,ids:{trigger:"favFilter"},children:e.jsx(z,{ids:{root:"favFilter"},gray:!0,onClick:t=>t.stopPropagation(),checked:x,onCheckedChange:t=>d(!!t.checked)})}),list:S,rows:t=>e.jsx(se,{id:t.id,name:t.name,logo:t.logo,category:t.category,favorite:p.includes(t.id),fixed:t.fixed,cars:t.cars,weeks:t.weeks,license:t.license.letter,color:t.license.color,duration:t.duration,laps:t.laps,official:t.official},t.id)})]})}export{ge as default};
