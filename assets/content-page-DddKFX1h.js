import{p as N,w as P,j as e,S as L,T as w,C as I,m as p,a9 as M,F as E,O as _,aa as $,P as H,R as U,b as W,A as F,l as V,ab as K,y as q,K as J,r as b}from"./index-bg1tIQXq.js";import{P as G,S as Q,L as X,C as Y,u as Z,a as ee}from"./star-checkbox-36_9HlI0.js";import{T as ne,c as te,d as D,i as v,g as l,C as se,e as re,u as ae,l as ie,m as oe,n as ce,S as le,j as i,p as xe,k as de,I as B,P as he,a as ue,b as pe,f as je}from"./content-checkbox-fU7pSMSk.js";import{P as ge,a as me}from"./page-header-BC_dFHe6.js";import{V as z,C as Ce}from"./content-name-badge-iyQbZH53.js";import{C as fe}from"./icons-B1bz76Hk.js";import{F as Se}from"./index-DNaVLbmh.js";function be({...t}){const[s,r]=N(),x=s===P.MyCars?"Cars":"Tracks";return e.jsx(L,{...t,children:e.jsx(ne,{size:"sm",variant:"enclosed",width:"100%",flex:1,value:x,onValueChange:d=>r(d.value==="Cars"?P.MyCars:P.MyTracks),children:e.jsxs(te,{flex:1,width:"100%",children:[e.jsx(D,{value:"Cars",width:"100%",children:e.jsx(w,{textWrap:"nowrap",userSelect:"none",children:"Cars"})}),e.jsx(D,{value:"Tracks",width:"100%",children:e.jsx(w,{textWrap:"nowrap",userSelect:"none",children:"Tracks"})})]})})})}function we({list:t,rows:s}){return e.jsx(G,{list:t,rows:s,children:e.jsxs(v,{bgColor:"bg.muted",children:[e.jsx(l,{minWidth:"40px",textAlign:"center",children:e.jsx(z,{children:"Owned content"})}),e.jsx(l,{minWidth:"60px",textAlign:"center",children:e.jsx(z,{children:"Content Logo"})}),e.jsx(l,{width:"100%",children:"Name"}),e.jsx(l,{minWidth:"90px",textAlign:"center",children:"Includes"}),e.jsx(l,{minWidth:"90px",textAlign:"center",children:"Series"}),e.jsx(l,{minWidth:"90px",textAlign:"center",children:"Category"}),e.jsx(l,{minWidth:"90px",textAlign:"center",children:"Price"}),e.jsx(l,{minWidth:"90px",children:e.jsx(z,{children:"Info on iracing.com"})})]})})}function ye({price:t,...s}){return t>0?e.jsxs(I,{colorPalette:"orange",...s,children:[e.jsx(p,{icon:M,size:"xs"}),e.jsx(Se,{value:t,style:"currency",currency:"USD"})]}):e.jsx(I,{colorPalette:"green",...s,children:"Free"})}function Te({content:t,id:s}){const r=t==="cars"?se[s.toString()]:re[s.toString()],{favoriteSeries:x}=ae(),d=(r.skuSeries?r.skuSeries:r.series)||[];return e.jsx(ie,{width:"100%",maxH:"320px",children:e.jsx(oe,{size:"sm",striped:!0,children:e.jsx(ce,{fontSize:"xs",children:e.jsx(E,{each:d,children:o=>{const a=le[o.toString()];return a&&e.jsxs(v,{bgColor:"transparent",children:[e.jsx(i,{w:"20px",textAlign:"center",p:0,borderBottom:0,px:"4px",children:e.jsx(Q,{size:"xs",mt:"4px",checked:x.includes(o),onCheckedChange:({checked:j})=>xe(a.id,!!j)})}),e.jsx(i,{width:"100%",display:"flex",alignItems:"center",p:0,borderBottom:0,px:"4px",fontWeight:"bold",maxW:"264px",children:e.jsx(w,{truncate:!0,children:a.name})}),e.jsx(i,{w:"20px",p:0,borderBottom:0,px:"4px",paddingInline:0,children:e.jsx(X,{letter:a.license.letter,color:a.license.color,size:"xs",children:a.license.letter})})]},o)}})})})})}function Ae({href:t}){return e.jsxs(_,{colorPalette:"blue",size:"xs",p:"0 8px",height:"24px",as:"a",href:t,target:"_blank",rel:"noreferrer",children:[e.jsx(p,{icon:$}),e.jsxs("span",{children:["Info",e.jsx(p,{icon:H,size:"xs"})]})]})}function ke({content:t,id:s,sku:r,price:x,name:d,logo:o,categories:a,free:j,skuGroup:h,series:m,skuIcon:C,infoUrl:u,owned:y,wish:f}){const S=h?Object.values(h):[];return e.jsxs(v,{bgColor:"transparent",children:[e.jsx(i,{minWidth:"40px",textAlign:"center",children:e.jsx(de,{content:t,contentId:s,sku:r,free:j,owned:y,wish:f})}),e.jsx(i,{minWidth:"60px",textAlign:"center",children:o&&e.jsx(Y,{children:e.jsx(W,{lazyMount:!0,unmountOnExit:!0,content:e.jsx(F,{loading:"lazy",userSelect:"none",draggable:!1,h:"80px",w:"160px",fit:"contain",src:`${B.image}${o}`}),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(F,{loading:"lazy",userSelect:"none",draggable:!1,h:"24px",fit:"contain",src:`${B.image}${o}`})},o)})}),e.jsx(i,{width:"100%",children:e.jsx(Ce,{name:d})}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:h&&e.jsx(W,{lazyMount:!0,unmountOnExit:!0,content:S.map(c=>e.jsx(w,{as:"p",children:c},c)),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsxs(I,{variant:"solid",_light:{bg:"gray.600"},children:[e.jsx(p,{icon:C,size:"sm"}),S.length]})})}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:m&&e.jsxs(he,{lazyMount:!0,unmountOnExit:!0,children:[e.jsx(ue,{asChild:!0,children:e.jsxs(V,{gap:1,justifyContent:"center",cursor:"pointer",children:[e.jsx(p,{icon:K}),m.length,e.jsx(p,{icon:q})]})}),e.jsxs(pe,{p:2,children:[e.jsx(je,{}),e.jsx(Te,{id:s,content:t})]})]})}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:e.jsx(E,{each:a,children:(c,T)=>e.jsx(W,{lazyMount:!0,unmountOnExit:!0,content:J[c],showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(fe,{fontSize:"16px",ml:T>0?"6px":void 0,category:c})},`${c}`)})}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:e.jsx(ye,{price:x})}),e.jsx(i,{minWidth:"90px",textAlign:"end",children:e.jsx(Ae,{href:u})})]})}const Pe=U.memo(ke);function Be({allTab:t,content:s,contentListJson:r,description:x,freeCount:d,infoUrl:o,myContent:a,skuIcon:j,tabs:h,title:m,wish:C}){const[u,y]=b.useState(t),[f,S]=b.useState(""),[c,T]=b.useState(r),R=Z(f,500);return b.useEffect(()=>{const n=u===t?r:r.filter(k=>k.categories.some(O=>h[O]===u)),g=R.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),A=g?n.filter(k=>k.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(g)):n;T(A)},[R,u]),e.jsxs(ge,{children:[e.jsx(me,{freeCount:d,ownedCount:a.length??0,wishCount:C.length??0,title:m,description:x,children:e.jsx(be,{hideFrom:"md"})}),e.jsx(ee,{tabs:h,tab:u,onTabChange:y,search:f,onSearchChange:S}),e.jsx(we,{list:c,rows:n=>{const g=a.includes(n.sku),A=!g&&C.includes(n.sku);return e.jsx(Pe,{id:n.id,sku:n.sku,content:s,infoUrl:o(n.id),skuIcon:j,price:n.price,name:n.name,logo:n.logo,categories:n.categories,free:n.free,skuGroup:n.skuGroup,series:n.skuSeries?n.skuSeries:n.series,owned:g,wish:A},n.id)}})]})}export{Be as C};
