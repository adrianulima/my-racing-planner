import{w as N,A,j as e,S as L,T as k,t as H,n as B,M as z,o as p,ad as _,F as M,X as $,ae as U,Y as V,R as q,G,J,a as W,C as R,af as X,D as K,Q,r as y,x as Y}from"./index-eb7wFJrk.js";import{P as Z,S as ee,L as ne,C as se,u as te,a as re}from"./star-checkbox-CyHiJN9G.js";import{T as ae,c as oe,d as F,k as P,g as u,C as ie,e as ce,u as le,h as xe,i as de,m as he,S as ue,f as c,p as pe,I as D,P as ge,a as je,b as me,l as Ce,q as fe,r as Se,s as be,n as we}from"./tracks-CrM_92uz.js";import{C as ye}from"./checkbox-counts-B-YLL_Q4.js";import{P as ke}from"./page-header-BrSXI3_B.js";import{V as v,C as Te}from"./content-name-badge-HV7Ic15w.js";import{a as Ae,C as We}from"./index-DZaZiF3K.js";import{F as ve}from"./index-Bf-h3hKt.js";function ze({...s}){const[r,t]=N(),x=r===A.MyCars?"Cars":"Tracks";return e.jsx(L,{...s,children:e.jsx(ae,{size:"sm",variant:"enclosed",width:"100%",flex:1,value:x,onValueChange:d=>t(d.value==="Cars"?A.MyCars:A.MyTracks),children:e.jsxs(oe,{flex:1,width:"100%",children:[e.jsx(F,{value:"Cars",width:"100%",children:e.jsx(k,{textWrap:"nowrap",userSelect:"none",children:"Cars"})}),e.jsx(F,{value:"Tracks",width:"100%",children:e.jsx(k,{textWrap:"nowrap",userSelect:"none",children:"Tracks"})})]})})})}function Pe({title:s,description:r,freeCount:t,ownedCount:x,wishCount:d}){const{height:o}=H(),a=i=>o<=680?void 0:i;return e.jsxs(B,{padding:{base:"unset",md:a(4)},justifyContent:"space-between",alignItems:"start",children:[e.jsx(ke,{title:s,description:r}),e.jsx(ye,{freeCount:t,ownedCount:x,wishCount:d})]})}function Ie({list:s,rows:r}){return e.jsx(Z,{list:s,rows:r,children:e.jsxs(P,{bgColor:"bg.muted",children:[e.jsx(u,{minWidth:"40px",textAlign:"center",children:e.jsx(v,{children:"Owned content"})}),e.jsx(u,{minWidth:"60px",textAlign:"center",children:e.jsx(v,{children:"Content Logo"})}),e.jsx(u,{width:"100%",children:"Name"}),e.jsx(u,{minWidth:"90px",textAlign:"center",children:"Includes"}),e.jsx(u,{minWidth:"90px",textAlign:"center",children:"Series"}),e.jsx(u,{minWidth:"90px",textAlign:"center",children:"Category"}),e.jsx(u,{minWidth:"90px",textAlign:"center",children:"Price"}),e.jsx(u,{minWidth:"90px",children:e.jsx(v,{children:"Info on iracing.com"})})]})})}function Re({price:s,...r}){return s>0?e.jsxs(z,{colorPalette:"orange",...r,children:[e.jsx(p,{icon:_,size:"xs"}),e.jsx(ve,{value:s,style:"currency",currency:"USD"})]}):e.jsx(z,{colorPalette:"green",...r,children:"Free"})}function Fe({content:s,id:r}){const t=s==="cars"?ie[r.toString()]:ce[r.toString()],{favoriteSeries:x}=le(),d=(t.skuSeries?t.skuSeries:t.series)||[];return e.jsx(xe,{width:"100%",maxH:"320px",children:e.jsx(de,{size:"sm",striped:!0,children:e.jsx(he,{fontSize:"xs",children:e.jsx(M,{each:d,children:o=>{const a=ue[o.toString()];return a&&e.jsxs(P,{bgColor:"transparent",children:[e.jsx(c,{w:"20px",textAlign:"center",p:0,borderBottom:0,px:"4px",children:e.jsx(ee,{size:"xs",mt:"4px",checked:x.includes(o),onCheckedChange:({checked:i})=>pe(a.id,!!i)})}),e.jsx(c,{width:"100%",display:"flex",alignItems:"center",p:0,borderBottom:0,px:"4px",fontWeight:"bold",maxW:"264px",children:e.jsx(k,{truncate:!0,children:a.name})}),e.jsx(c,{w:"20px",p:0,borderBottom:0,px:"4px",paddingInline:0,children:e.jsx(ne,{letter:a.license.letter,color:a.license.color,size:"xs",children:a.license.letter})})]},o)}})})})})}function De({href:s}){return e.jsxs($,{colorPalette:"blue",size:"xs",p:"0 8px",height:"24px",as:"a",href:s,target:"_blank",rel:"noreferrer",children:[e.jsx(p,{icon:U}),e.jsxs("span",{children:["Info",e.jsx(p,{icon:V,size:"xs"})]})]})}function Be({content:s,id:r,sku:t,price:x,name:d,logo:o,categories:a,free:i,skuGroup:g,series:C,skuIcon:f,infoUrl:j,owned:m,wish:h}){const[S,b]=s==="cars"?[fe,Se]:[be,we];return e.jsxs(P,{bgColor:"transparent",children:[e.jsx(c,{minWidth:"40px",textAlign:"center",children:e.jsx(G,{readOnly:i,colorPalette:i?"green":h?"blue":void 0,checked:i||m||h,controlProps:{borderColor:!i&&!h&&!m?"gray.400":void 0},icon:i?e.jsx(p,{size:"xs",icon:J}):h?e.jsx(p,{size:"xs",icon:Ae}):void 0,onClick:l=>l.stopPropagation(),onCheckedChange:()=>{m?(S(t,!1),b(t,!0)):h?b(t,!1):S(t,!0)}})}),e.jsx(c,{minWidth:"60px",textAlign:"center",children:o&&e.jsx(se,{children:e.jsx(W,{lazyMount:!0,unmountOnExit:!0,content:e.jsx(R,{loading:"lazy",userSelect:"none",draggable:!1,h:"80px",w:"160px",fit:"contain",src:`${D.image}${o}`}),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(R,{loading:"lazy",userSelect:"none",draggable:!1,h:"24px",fit:"contain",src:`${D.image}${o}`})},o)})}),e.jsx(c,{width:"100%",children:e.jsx(Te,{name:d})}),e.jsx(c,{minWidth:"90px",textAlign:"center",children:g&&e.jsx(W,{lazyMount:!0,unmountOnExit:!0,content:g.map(l=>e.jsx(k,{as:"p",children:l},l)),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsxs(z,{variant:"solid",_light:{bg:"gray.600"},children:[e.jsx(p,{icon:f,size:"sm"}),g.length]})})}),e.jsx(c,{minWidth:"90px",textAlign:"center",children:C&&e.jsxs(ge,{lazyMount:!0,unmountOnExit:!0,children:[e.jsx(je,{asChild:!0,children:e.jsxs(B,{gap:1,justifyContent:"center",cursor:"pointer",children:[e.jsx(p,{icon:X}),C.length,e.jsx(p,{icon:K})]})}),e.jsxs(me,{p:2,children:[e.jsx(Ce,{}),e.jsx(Fe,{id:r,content:s})]})]})}),e.jsx(c,{minWidth:"90px",textAlign:"center",children:e.jsx(M,{each:a,children:(l,w)=>e.jsx(W,{lazyMount:!0,unmountOnExit:!0,content:Q[l],showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(We,{fontSize:"16px",ml:w>0?"6px":void 0,category:l})},`${l}`)})}),e.jsx(c,{minWidth:"90px",textAlign:"center",children:e.jsx(Re,{price:x})}),e.jsx(c,{minWidth:"90px",textAlign:"end",children:e.jsx(De,{href:j})})]})}const Me=q.memo(Be);function Ve({allTab:s,content:r,contentListJson:t,description:x,freeCount:d,infoUrl:o,myContent:a,skuIcon:i,tabs:g,title:C,wish:f}){const[j,m]=y.useState(s),[h,S]=y.useState(""),[b,l]=y.useState(t),w=te(h,500);return y.useEffect(()=>{const n=j===s?t:t.filter(T=>T.categories.some(O=>g[O]===j)),I=w.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),E=I?n.filter(T=>T.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(I)):n;l(E)},[w,j]),e.jsxs(Y,{direction:"column",height:"100%",width:"100%",gap:"8px",children:[e.jsx(Pe,{freeCount:d,ownedCount:a.length??0,wishCount:f.length??0,title:C,description:x}),e.jsx(ze,{hideFrom:"md"}),e.jsx(re,{tabs:g,tab:j,onTabChange:m,search:h,onSearchChange:S}),e.jsx(Ie,{list:b,rows:n=>e.jsx(Me,{id:n.id,sku:n.sku,content:r,infoUrl:o(n.id),skuIcon:i,price:n.price,name:n.name,logo:n.logo,categories:n.categories,free:n.free,skuGroup:n.skuGroup?Object.values(n.skuGroup):void 0,series:n.skuSeries?n.skuSeries:n.series,owned:a.includes(n.sku),wish:f.includes(n.sku)},n.id)})]})}export{Ve as C};
