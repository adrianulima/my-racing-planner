import{$ as N,r as i,a0 as h,j as n,a1 as l,a2 as $,a3 as A,a4 as E,a5 as U,a6 as M,a7 as H,a8 as O,a9 as C,aa as q,ab as x,ac as g,u as L}from"./index-CGgftd5G.js";import{u as k}from"./checkbox-CKH4rKtB.js";import{S as f}from"./series-CnzaCJOd.js";const[P,u]=N({name:"SwitchContext",hookName:"useSwitchContext",providerName:"<SwitchProvider />"}),b=i.forwardRef((e,o)=>{const s=u(),t=h(s.getControlProps(),e);return n.jsx(l.span,{...t,ref:o})});b.displayName="SwitchControl";const y=i.forwardRef((e,o)=>{const s=u(),t=h(s.getHiddenInputProps(),e),r=k();return n.jsx(l.input,{"aria-describedby":r==null?void 0:r.ariaDescribedby,...t,ref:o})});y.displayName="SwitchHiddenInput";const R=i.forwardRef((e,o)=>{const s=u(),t=h(s.getLabelProps(),e);return n.jsx(l.span,{...t,ref:o})});R.displayName="SwitchLabel";const F=(e={})=>{const{getRootNode:o}=$(),{dir:s}=A(),t=k(),r={id:i.useId(),ids:{label:t==null?void 0:t.ids.label,hiddenInput:t==null?void 0:t.ids.control},dir:s,disabled:t==null?void 0:t.disabled,readOnly:t==null?void 0:t.readOnly,invalid:t==null?void 0:t.invalid,required:t==null?void 0:t.required,getRootNode:o,checked:e.defaultChecked,...e},a={...r,checked:e.checked,onCheckedChange:E(e.onCheckedChange,{sync:!0})},[d,c]=U(M(r),{context:a});return H(d,c,O)},j=i.forwardRef((e,o)=>{const[s,t]=C()(e,["checked","defaultChecked","disabled","form","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]),r=F(s),a=h(r.getRootProps(),t);return n.jsx(P,{value:r,children:n.jsx(l.label,{...a,ref:o})})});j.displayName="SwitchRoot";const v=i.forwardRef((e,o)=>{const[{value:s},t]=C()(e,["value"]),r=h(s.getRootProps(),t);return n.jsx(P,{value:s,children:n.jsx(l.label,{...r,ref:o})})});v.displayName="SwitchRootProvider";const T=i.forwardRef((e,o)=>{const s=u(),t=h(s.getThumbProps(),e);return n.jsx(l.span,{...t,ref:o})});T.displayName="SwitchThumb";const{withProvider:I,withContext:p,useStyles:_,PropsProvider:tt}=q({key:"switch"});I(v,"root",{forwardAsChild:!0});const z=I(j,"root",{forwardAsChild:!0}),J=p(R,"label",{forwardAsChild:!0}),Y=p(b,"control",{forwardAsChild:!0}),B=p(T,"thumb",{forwardAsChild:!0}),G=i.forwardRef(function(o,s){const t=u(),r=_(),{fallback:a,children:d,...c}=o;return n.jsx(x.span,{ref:s,"data-checked":g(t.checked),...c,css:[r.indicator,o.css],children:t.checked?d:a})}),K=i.forwardRef(function(o,s){const t=u(),{fallback:r,children:a,...d}=o;return n.jsx(x.span,{ref:s,"data-checked":g(t.checked),...d,children:t.checked?a:r})}),Q=y,et=i.forwardRef(function(o,s){const{inputProps:t,children:r,rootRef:a,trackLabel:d,thumbLabel:c,...w}=o;return n.jsxs(z,{ref:a,...w,children:[n.jsx(Q,{ref:s,...t}),n.jsxs(Y,{children:[n.jsx(B,{children:c&&n.jsx(K,{fallback:c==null?void 0:c.off,children:c==null?void 0:c.on})}),d&&n.jsx(G,{fallback:d.off,children:d.on})]}),r!=null&&n.jsx(J,{children:r})]})});function m(e){const o=new Date(e),s=o.getUTCDay();if(s!==2){const t=s-2>=0?s-2:s-2+7;o.setUTCDate(o.getUTCDate()-t)}return V(o)}function V(e){const o=e.getUTCFullYear(),s=String(e.getUTCMonth()+1).padStart(2,"0"),t=String(e.getUTCDate()).padStart(2,"0");return`${o}-${s}-${t}`}const ot=()=>{const{favoriteSeries:e}=L(),o=i.useMemo(()=>[...new Set(e.map(t=>{var r;return((r=f[t.toString()])==null?void 0:r.weeks.map(a=>m(a.date)))??[]}).flat())],[e]),s=i.useMemo(()=>e.reduce((t,r)=>{const a=f[r.toString()];return{...t,[r]:a==null?void 0:a.weeks.reduce((d,c)=>{var S;const w=m(c.date);return{...d,[w]:c.track.id,...a.switching?{[`${w}_cars`]:(S=c.cars)==null?void 0:S.map(D=>D.id)}:{}}},{})}},{}),[e]);return{weeksStartDates:o,seriesDateMap:s}};export{et as S,V as f,m as g,ot as u};
