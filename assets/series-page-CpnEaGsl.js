import{S as I,j as e,n as l,W as L,R as O,r as c,X as M,T as C,P as A,Y as B,H as k,f as N,C as W,Z as $,_ as H,E as f,u as _}from"./index-BOlLdPuj.js";import{S as z,u as U,C as V}from"./star-checkbox-DBX0891M.js";import{j as R,h as i,k as o,I as v,P as D,a as E,b as F,g as P,p as J,f as X}from"./content-checkbox-coc1i1AZ.js";import{I as Y,C as Z}from"./infinity-table-CEbkmoAq.js";import{V as q,C as G}from"./content-name-badge-DGC_mB-k.js";import{C as K}from"./icons-DxNg5zvp.js";import{c as Q,C as T}from"./content-popover-CZoozL5Y.js";import{f as ee}from"./index-DiS1clUK.js";import{B as b}from"./checkbox-CZkn8mVQ.js";import{L as te}from"./license-badge-C2A9CTR4.js";import"./cars-DAFZD8GO.js";const w=Object.values(I).sort((r,n)=>r.license.id-n.license.id||r.name.localeCompare(n.name));function ne({list:r,rows:n,filterButton:a}){return e.jsx(Y,{list:r,rows:n,cols:9,children:e.jsxs(R,{bgColor:"bg.muted",children:[e.jsx(i,{minWidth:"40px",textAlign:"center",children:a}),e.jsx(i,{minWidth:"60px",textAlign:"center",children:e.jsx(q,{children:"Series Logo"})}),e.jsx(i,{width:"100%",children:"Name"}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:"Setup"}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:"Cars"}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:"Tracks"}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:"Category"}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:"Duration"}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:"License"})]})})}function re({duration:r,laps:n}){const a=Q(n,r);return e.jsxs(b,{colorPalette:n?"pink":"purple",children:[e.jsx(l,{icon:n?L:ee,size:"xs"}),a]})}function se({id:r,logo:n,name:a,cars:u,weeks:S,favorite:y,fixed:x,category:d,license:h,color:p,duration:t,laps:g,official:j}){const m=c.useMemo(()=>[...new Set(S.map(s=>s.track.id))],[]);return e.jsxs(R,{bgColor:"transparent",children:[e.jsx(o,{minWidth:"40px",textAlign:"center",children:e.jsx(z,{onClick:s=>s.stopPropagation(),checked:y,onCheckedChange:s=>M(r,!!s.checked)})}),e.jsx(o,{minWidth:"60px",textAlign:"center",children:n&&e.jsx(Z,{children:e.jsx(C,{lazyMount:!0,unmountOnExit:!0,content:e.jsx(A,{loading:"lazy",userSelect:"none",draggable:!1,h:"80px",w:"160px",fit:"contain",src:`${v.image}/img/logos/series/${n}`}),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(A,{loading:"lazy",userSelect:"none",draggable:!1,h:"24px",fit:"contain",src:`${v.image}/img/logos/series/${n}`})},n)})}),e.jsx(o,{width:"100%",children:e.jsx(G,{name:a,children:!j&&e.jsx(b,{colorPalette:"yellow",mr:1,children:"Unranked"})})}),e.jsx(o,{minWidth:"90px",textAlign:"center",children:x&&e.jsx(C,{lazyMount:!0,unmountOnExit:!0,content:"Fixed Setup",showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsxs(b,{variant:"solid",_light:{bg:"gray.600"},children:[e.jsx(l,{icon:B,size:"sm"}),"Fixed"]})})}),e.jsx(o,{minWidth:"90px",textAlign:"center",children:e.jsxs(D,{lazyMount:!0,unmountOnExit:!0,children:[e.jsx(E,{asChild:!0,children:e.jsxs(k,{gap:1,justifyContent:"center",cursor:"pointer",children:[e.jsx(l,{icon:N}),u.length,e.jsx(l,{icon:W})]})}),e.jsxs(F,{p:2,children:[e.jsx(P,{}),e.jsx(T,{content:"cars",list:u})]})]})}),e.jsx(o,{minWidth:"90px",textAlign:"center",children:e.jsxs(D,{lazyMount:!0,unmountOnExit:!0,children:[e.jsx(E,{asChild:!0,children:e.jsxs(k,{gap:1,justifyContent:"center",cursor:"pointer",children:[e.jsx(l,{icon:$}),m.length,e.jsx(l,{icon:W})]})}),e.jsxs(F,{p:2,children:[e.jsx(P,{}),e.jsx(T,{content:"tracks",list:m})]})]})}),e.jsx(o,{minWidth:"90px",textAlign:"center",children:e.jsx(C,{lazyMount:!0,unmountOnExit:!0,content:H[d],showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(K,{fontSize:"16px",category:d})},`${d}`)}),e.jsx(o,{minWidth:"130px",textAlign:"center",children:e.jsx(re,{duration:t,laps:g})}),e.jsx(o,{minWidth:"40px",textAlign:"center",children:e.jsx(te,{letter:h,color:p,children:h})})]})}const ie=O.memo(se);function me(){const[r,n]=c.useState(f.all),[a,u]=c.useState(""),[S,y]=c.useState(w),[x,d]=c.useState(!1),h=U(a,500),{favoriteSeries:p}=_();return c.useEffect(()=>{const t=r===f.all?w:w.filter(s=>f[s.category]===r),g=x?t.filter(s=>p.includes(s.id)):t,j=h.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),m=j?g.filter(s=>s.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(j)):g;y(m)},[h,r,x]),e.jsxs(J,{children:[e.jsx(X,{title:"My Favorite Series",description:"Select the series you wanna see in your season planner"}),e.jsx(V,{tabs:f,tab:r,onTabChange:n,search:a,onSearchChange:u}),e.jsx(ne,{filterButton:e.jsx(C,{lazyMount:!0,unmountOnExit:!0,content:"Filter favorite series only",showArrow:!0,openDelay:200,closeDelay:100,ids:{trigger:"favFilter"},children:e.jsx(z,{ids:{root:"favFilter"},gray:!0,onClick:t=>t.stopPropagation(),checked:x,onCheckedChange:t=>d(!!t.checked)})}),list:S,rows:t=>e.jsx(ie,{id:t.id,name:t.name,logo:t.logo,category:t.category,favorite:p.includes(t.id),fixed:t.fixed,cars:t.cars,weeks:t.weeks,license:t.license.letter,color:t.license.color,duration:t.duration,laps:t.laps,official:t.official},t.id)})]})}export{me as default};
