import{p as H,y as I,j as e,a1 as $,o as z,l as m,ai as V,u as U,F as M,S as J,V as K,R as X,T as v,N as E,H as Y,aj as q,A as G,Y as Q,r as S,ak as Z,al as ee}from"./index-BpnnewVR.js";import{S as te,L as se,u as ne,C as re}from"./star-checkbox-BrYyPHWK.js";import{T as oe,c as ie,d as O,j as D,h as u,e as ae,l as ce,m as le,n as xe,k as a,C as de,I as N,P as he,a as ue,b as pe,g as ge,p as je,f as me}from"./content-checkbox-D81-bmbi.js";import{B as R,C as Ce}from"./checkbox-BC1GymgE.js";import{I as fe,C as Se}from"./infinity-table-MjSJxOFh.js";import{V as be,C as ke}from"./content-name-badge-DeiVAKOx.js";import{C as we}from"./icons-B147dHjv.js";import{F as ye}from"./index-BTy9dKjq.js";import{C as Te}from"./cars-By9GStcW.js";function Ae({...s}){const[n,r]=H(),x=n===I.MyCars?"Cars":"Tracks";return e.jsx($,{...s,children:e.jsx(oe,{size:"sm",variant:"enclosed",width:"100%",flex:1,value:x,onValueChange:d=>r(d.value==="Cars"?I.MyCars:I.MyTracks),children:e.jsxs(ie,{flex:1,width:"100%",children:[e.jsx(O,{value:"Cars",width:"100%",children:e.jsx(z,{textWrap:"nowrap",userSelect:"none",children:"Cars"})}),e.jsx(O,{value:"Tracks",width:"100%",children:e.jsx(z,{textWrap:"nowrap",userSelect:"none",children:"Tracks"})})]})})})}function ve({list:s,rows:n,filterButton:r}){return e.jsx(fe,{list:s,rows:n,cols:7,children:e.jsxs(D,{bgColor:"bg.muted",children:[e.jsx(u,{minWidth:"40px",textAlign:"center",children:r}),e.jsx(u,{minWidth:"60px",textAlign:"center",children:e.jsx(be,{children:"Content Logo"})}),e.jsx(u,{width:"100%",children:"Name"}),e.jsx(u,{minWidth:"90px",textAlign:"center",children:"Includes"}),e.jsx(u,{minWidth:"90px",textAlign:"center",children:"Series"}),e.jsx(u,{minWidth:"90px",textAlign:"center",children:"Category"}),e.jsx(u,{minWidth:"90px",textAlign:"center",children:"Price"})]})})}function ze({price:s,...n}){return s>0?e.jsxs(R,{colorPalette:"orange",...n,children:[e.jsx(m,{icon:V,size:"xs"}),e.jsx(ye,{value:s,style:"currency",currency:"USD"})]}):e.jsx(R,{colorPalette:"green",...n,children:"Free"})}function We({content:s,id:n}){const r=s==="cars"?Te[n.toString()]:ae[n.toString()],{favoriteSeries:x}=U(),d=(r.skuSeries?r.skuSeries:r.series)||[];return e.jsx(ce,{width:"100%",maxH:"320px",children:e.jsx(le,{size:"sm",striped:!0,children:e.jsx(xe,{fontSize:"xs",children:e.jsx(M,{each:d,children:o=>{const i=J[o.toString()];return i&&e.jsxs(D,{bgColor:"transparent",children:[e.jsx(a,{w:"20px",textAlign:"center",p:0,borderBottom:0,px:"4px",children:e.jsx(te,{size:"xs",mt:"4px",checked:x.includes(o),onCheckedChange:({checked:p})=>K(i.id,!!p)})}),e.jsx(a,{width:"100%",display:"flex",alignItems:"center",p:0,borderBottom:0,px:"4px",fontWeight:"bold",maxW:"264px",children:e.jsx(z,{truncate:!0,children:i.name})}),e.jsx(a,{w:"20px",p:0,borderBottom:0,px:"4px",paddingInline:0,children:e.jsx(se,{letter:i.license.letter,color:i.license.color,size:"xs",children:i.license.letter})})]},o)}})})})})}function Fe({content:s,id:n,sku:r,price:x,name:d,logo:o,categories:i,free:p,skuGroup:C,series:g,skuIcon:j,owned:W,wish:b}){const k=C?Object.values(C):[];return e.jsxs(D,{bgColor:"transparent",children:[e.jsx(a,{minWidth:"40px",textAlign:"center",children:e.jsx(de,{content:s,contentId:n,sku:r,free:p,owned:W,wish:b})}),e.jsx(a,{minWidth:"60px",textAlign:"center",children:o&&e.jsx(Se,{children:e.jsx(v,{lazyMount:!0,unmountOnExit:!0,content:e.jsx(E,{loading:"lazy",userSelect:"none",draggable:!1,h:"80px",w:"160px",fit:"contain",src:`${N.image}${o}`}),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(E,{loading:"lazy",userSelect:"none",draggable:!1,h:"24px",fit:"contain",src:`${N.image}${o}`})},o)})}),e.jsx(a,{width:"100%",children:e.jsx(ke,{name:d})}),e.jsx(a,{minWidth:"90px",textAlign:"center",children:C&&e.jsx(v,{lazyMount:!0,unmountOnExit:!0,content:k.map(c=>e.jsx(z,{as:"p",children:c},c)),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsxs(R,{variant:"solid",_light:{bg:"gray.600"},children:[e.jsx(m,{icon:j,size:"sm"}),k.length]})})}),e.jsx(a,{minWidth:"90px",textAlign:"center",children:g&&e.jsxs(he,{lazyMount:!0,unmountOnExit:!0,children:[e.jsx(ue,{asChild:!0,children:e.jsxs(Y,{gap:1,justifyContent:"center",cursor:"pointer",children:[e.jsx(m,{icon:q}),g.length,e.jsx(m,{icon:G})]})}),e.jsxs(pe,{p:2,children:[e.jsx(ge,{}),e.jsx(We,{id:n,content:s})]})]})}),e.jsx(a,{minWidth:"90px",textAlign:"center",children:e.jsx(M,{each:i,children:(c,F)=>e.jsx(v,{lazyMount:!0,unmountOnExit:!0,content:Q[c],showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(we,{fontSize:"16px",ml:F>0?"6px":void 0,category:c})},`${c}`)})}),e.jsx(a,{minWidth:"90px",textAlign:"center",children:e.jsx(ze,{price:x})})]})}const Pe=X.memo(Fe);function _e({allTab:s,content:n,contentListJson:r,description:x,freeCount:d,myContent:o,skuIcon:i,tabs:p,title:C,wish:g}){const[j,W]=S.useState(s),[b,k]=S.useState(""),[c,F]=S.useState(r),[l,w]=S.useState(0),P=l===3,y=l===2,T=l===1,B=ne(b,500);return S.useEffect(()=>{const t=j===s?r:r.filter(h=>h.categories.some(_=>p[_]===j)),f=l!==0?t.filter(h=>{if(l===1)return h.free;if(l===2)return g.includes(h.sku);if(l===3)return o.includes(h.sku)}):t,A=B.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),L=A?f.filter(h=>h.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(A)):f;F(L)},[B,j,l]),e.jsxs(je,{children:[e.jsx(me,{freeCount:d,ownedCount:o.length??0,wishCount:g.length??0,title:C,description:x,children:e.jsx(Ae,{hideFrom:"md"})}),e.jsx(re,{tabs:p,tab:j,onTabChange:W,search:b,onSearchChange:k}),e.jsx(ve,{filterButton:e.jsx(v,{lazyMount:!0,unmountOnExit:!0,content:"Filter content by checkbox state",showArrow:!0,openDelay:200,closeDelay:100,ids:{trigger:"checkFilter"},children:e.jsx(Ce,{ids:{root:"checkFilter"},checked:T||P||y,controlProps:{bgColor:T||P||y?{_hover:"fg",base:"gray.400"}:void 0,borderColor:{_hover:"fg",base:"gray.400"}},icon:T?e.jsx(m,{size:"xs",icon:Z}):y?e.jsx(m,{size:"xs",icon:ee}):void 0,onClick:t=>t.stopPropagation(),onCheckedChange:()=>{w(P?2:y?1:T?0:3)}})}),list:c,rows:t=>{const f=o.includes(t.sku),A=!f&&g.includes(t.sku);return e.jsx(Pe,{id:t.id,sku:t.sku,content:n,skuIcon:i,price:t.price,name:t.name,logo:t.logo,categories:t.categories,free:t.free,skuGroup:t.skuGroup,series:t.skuSeries?t.skuSeries:t.series,owned:f,wish:A},t.id)}})]})}export{_e as C};
