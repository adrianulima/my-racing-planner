import{n as M,w as I,j as e,W as N,m as w,i as p,ac as L,u as H,F as E,M as _,U as $,ad as U,V,R as q,T as W,C as F,H as J,ae as K,y as G,P as Q,r as b}from"./index-sXrlPjm0.js";import{I as X,S as Y,L as Z,C as ee,u as ne,a as se}from"./star-checkbox-C-eltDN4.js";import{T as te,c as re,d as B,j as P,h as l,C as ie,e as ae,m as oe,n as ce,p as le,S as xe,k as a,l as de,I as D,P as he,a as ue,b as pe,g as je,q as ge,f as me}from"./content-checkbox-DI4l5-lN.js";import{V as z,C as Ce}from"./content-name-badge-FICSraMy.js";import{C as fe}from"./icons-DHbS040X.js";import{B as v}from"./checkbox-DmF2D5qL.js";import{F as Se}from"./index-FE3L51Bb.js";function be({...s}){const[t,r]=M(),x=t===I.MyCars?"Cars":"Tracks";return e.jsx(N,{...s,children:e.jsx(te,{size:"sm",variant:"enclosed",width:"100%",flex:1,value:x,onValueChange:d=>r(d.value==="Cars"?I.MyCars:I.MyTracks),children:e.jsxs(re,{flex:1,width:"100%",children:[e.jsx(B,{value:"Cars",width:"100%",children:e.jsx(w,{textWrap:"nowrap",userSelect:"none",children:"Cars"})}),e.jsx(B,{value:"Tracks",width:"100%",children:e.jsx(w,{textWrap:"nowrap",userSelect:"none",children:"Tracks"})})]})})})}function we({list:s,rows:t}){return e.jsx(X,{list:s,rows:t,cols:8,children:e.jsxs(P,{bgColor:"bg.muted",children:[e.jsx(l,{minWidth:"40px",textAlign:"center",children:e.jsx(z,{children:"Owned content"})}),e.jsx(l,{minWidth:"60px",textAlign:"center",children:e.jsx(z,{children:"Content Logo"})}),e.jsx(l,{width:"100%",children:"Name"}),e.jsx(l,{minWidth:"90px",textAlign:"center",children:"Includes"}),e.jsx(l,{minWidth:"90px",textAlign:"center",children:"Series"}),e.jsx(l,{minWidth:"90px",textAlign:"center",children:"Category"}),e.jsx(l,{minWidth:"90px",textAlign:"center",children:"Price"}),e.jsx(l,{minWidth:"90px",children:e.jsx(z,{children:"Info on iracing.com"})})]})})}function ye({price:s,...t}){return s>0?e.jsxs(v,{colorPalette:"orange",...t,children:[e.jsx(p,{icon:L,size:"xs"}),e.jsx(Se,{value:s,style:"currency",currency:"USD"})]}):e.jsx(v,{colorPalette:"green",...t,children:"Free"})}function Te({content:s,id:t}){const r=s==="cars"?ie[t.toString()]:ae[t.toString()],{favoriteSeries:x}=H(),d=(r.skuSeries?r.skuSeries:r.series)||[];return e.jsx(oe,{width:"100%",maxH:"320px",children:e.jsx(ce,{size:"sm",striped:!0,children:e.jsx(le,{fontSize:"xs",children:e.jsx(E,{each:d,children:o=>{const i=xe[o.toString()];return i&&e.jsxs(P,{bgColor:"transparent",children:[e.jsx(a,{w:"20px",textAlign:"center",p:0,borderBottom:0,px:"4px",children:e.jsx(Y,{size:"xs",mt:"4px",checked:x.includes(o),onCheckedChange:({checked:j})=>_(i.id,!!j)})}),e.jsx(a,{width:"100%",display:"flex",alignItems:"center",p:0,borderBottom:0,px:"4px",fontWeight:"bold",maxW:"264px",children:e.jsx(w,{truncate:!0,children:i.name})}),e.jsx(a,{w:"20px",p:0,borderBottom:0,px:"4px",paddingInline:0,children:e.jsx(Z,{letter:i.license.letter,color:i.license.color,size:"xs",children:i.license.letter})})]},o)}})})})})}function Ae({href:s}){return e.jsxs($,{colorPalette:"blue",size:"xs",p:"0 8px",height:"24px",as:"a",href:s,target:"_blank",rel:"noreferrer",children:[e.jsx(p,{icon:U}),e.jsxs("span",{children:["Info",e.jsx(p,{icon:V,size:"xs"})]})]})}function ke({content:s,id:t,sku:r,price:x,name:d,logo:o,categories:i,free:j,skuGroup:h,series:m,skuIcon:C,infoUrl:u,owned:y,wish:f}){const S=h?Object.values(h):[];return e.jsxs(P,{bgColor:"transparent",children:[e.jsx(a,{minWidth:"40px",textAlign:"center",children:e.jsx(de,{content:s,contentId:t,sku:r,free:j,owned:y,wish:f})}),e.jsx(a,{minWidth:"60px",textAlign:"center",children:o&&e.jsx(ee,{children:e.jsx(W,{lazyMount:!0,unmountOnExit:!0,content:e.jsx(F,{loading:"lazy",userSelect:"none",draggable:!1,h:"80px",w:"160px",fit:"contain",src:`${D.image}${o}`}),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(F,{loading:"lazy",userSelect:"none",draggable:!1,h:"24px",fit:"contain",src:`${D.image}${o}`})},o)})}),e.jsx(a,{width:"100%",children:e.jsx(Ce,{name:d})}),e.jsx(a,{minWidth:"90px",textAlign:"center",children:h&&e.jsx(W,{lazyMount:!0,unmountOnExit:!0,content:S.map(c=>e.jsx(w,{as:"p",children:c},c)),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsxs(v,{variant:"solid",_light:{bg:"gray.600"},children:[e.jsx(p,{icon:C,size:"sm"}),S.length]})})}),e.jsx(a,{minWidth:"90px",textAlign:"center",children:m&&e.jsxs(he,{lazyMount:!0,unmountOnExit:!0,children:[e.jsx(ue,{asChild:!0,children:e.jsxs(J,{gap:1,justifyContent:"center",cursor:"pointer",children:[e.jsx(p,{icon:K}),m.length,e.jsx(p,{icon:G})]})}),e.jsxs(pe,{p:2,children:[e.jsx(je,{}),e.jsx(Te,{id:t,content:s})]})]})}),e.jsx(a,{minWidth:"90px",textAlign:"center",children:e.jsx(E,{each:i,children:(c,T)=>e.jsx(W,{lazyMount:!0,unmountOnExit:!0,content:Q[c],showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(fe,{fontSize:"16px",ml:T>0?"6px":void 0,category:c})},`${c}`)})}),e.jsx(a,{minWidth:"90px",textAlign:"center",children:e.jsx(ye,{price:x})}),e.jsx(a,{minWidth:"90px",textAlign:"end",children:e.jsx(Ae,{href:u})})]})}const Ie=q.memo(ke);function De({allTab:s,content:t,contentListJson:r,description:x,freeCount:d,infoUrl:o,myContent:i,skuIcon:j,tabs:h,title:m,wish:C}){const[u,y]=b.useState(s),[f,S]=b.useState(""),[c,T]=b.useState(r),R=ne(f,500);return b.useEffect(()=>{const n=u===s?r:r.filter(k=>k.categories.some(O=>h[O]===u)),g=R.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),A=g?n.filter(k=>k.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(g)):n;T(A)},[R,u]),e.jsxs(ge,{children:[e.jsx(me,{freeCount:d,ownedCount:i.length??0,wishCount:C.length??0,title:m,description:x,children:e.jsx(be,{hideFrom:"md"})}),e.jsx(se,{tabs:h,tab:u,onTabChange:y,search:f,onSearchChange:S}),e.jsx(we,{list:c,rows:n=>{const g=i.includes(n.sku),A=!g&&C.includes(n.sku);return e.jsx(Ie,{id:n.id,sku:n.sku,content:t,infoUrl:o(n.id),skuIcon:j,price:n.price,name:n.name,logo:n.logo,categories:n.categories,free:n.free,skuGroup:n.skuGroup,series:n.skuSeries?n.skuSeries:n.series,owned:g,wish:A},n.id)}})]})}export{De as C};
