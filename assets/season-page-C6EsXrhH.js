import{r as l,R as X,d as ze,u as St,j as h,F as _e,a as gt,s as Un,e as Yn,g as Kn,h as Vn,i as qn,k as Gn,l as _n,m as Jn,n as Ct,I as Qn,o as ve,p as Zn,q as er,E as pt,T as Je,t as tr,S as nr,B as rr,v as or,w as sr,x as ct,y as Wt,b as ir,c as $t,L as Xt,z as ar,A as lr,C as cr,f as ur,D as dr,G as fr,J as hr,K as gr}from"./index-eb7wFJrk.js";import{S as pr,u as vr,g as br,f as wr}from"./switch-Yl39858z.js";import{V as an,P as ln,a as cn,b as un,T as mr,c as xr,d as yr,u as dn,S as vt,e as fn,f as hn,g as gn,E as Ut,h as Sr,i as Cr,j as Dr,k as Yt,I as Rr,l as Er,m as kr,s as Kt,n as Vt,o as Tr}from"./tracks-CrM_92uz.js";import{C as Mr}from"./content-popover-CxVEE1RM.js";import{C as Ir}from"./index-DZaZiF3K.js";import{C as Ar}from"./checkbox-counts-B-YLL_Q4.js";import{P as jr}from"./page-header-BrSXI3_B.js";function Or(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const rt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Te(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Dt(e){return"nodeType"in e}function U(e){var t,n;return e?Te(e)?e:Dt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Rt(e){const{Document:t}=U(e);return e instanceof t}function $e(e){return Te(e)?!1:e instanceof U(e).HTMLElement}function pn(e){return e instanceof U(e).SVGElement}function Me(e){return e?Te(e)?e.document:Dt(e)?Rt(e)?e:$e(e)||pn(e)?e.ownerDocument:document:document:document}const se=rt?l.useLayoutEffect:l.useEffect;function Et(e){const t=l.useRef(e);return se(()=>{t.current=e}),l.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function Nr(){const e=l.useRef(null),t=l.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=l.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function He(e,t){t===void 0&&(t=[e]);const n=l.useRef(e);return se(()=>{n.current!==e&&(n.current=e)},t),n}function Xe(e,t){const n=l.useRef();return l.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Ze(e){const t=Et(e),n=l.useRef(null),r=l.useCallback(o=>{o!==n.current&&(t==null||t(o,n.current)),n.current=o},[]);return[n,r]}function bt(e){const t=l.useRef();return l.useEffect(()=>{t.current=e},[e]),t.current}let ut={};function Ue(e,t){return l.useMemo(()=>{if(t)return t;const n=ut[e]==null?0:ut[e]+1;return ut[e]=n,e+"-"+n},[e,t])}function vn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((s,i)=>{const a=Object.entries(i);for(const[c,u]of a){const d=s[c];d!=null&&(s[c]=d+e*u)}return s},{...t})}}const Ee=vn(1),et=vn(-1);function Lr(e){return"clientX"in e&&"clientY"in e}function kt(e){if(!e)return!1;const{KeyboardEvent:t}=U(e.target);return t&&e instanceof t}function zr(e){if(!e)return!1;const{TouchEvent:t}=U(e.target);return t&&e instanceof t}function wt(e){if(zr(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Lr(e)?{x:e.clientX,y:e.clientY}:null}const ke=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[ke.Translate.toString(e),ke.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),qt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Pr(e){return e.matches(qt)?e:e.querySelector(qt)}const Br={display:"none"};function Fr(e){let{id:t,value:n}=e;return X.createElement("div",{id:t,style:Br},n)}function Hr(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return X.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function Wr(){const[e,t]=l.useState("");return{announce:l.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const bn=l.createContext(null);function $r(e){const t=l.useContext(bn);l.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Xr(){const[e]=l.useState(()=>new Set),t=l.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[l.useCallback(r=>{let{type:o,event:s}=r;e.forEach(i=>{var a;return(a=i[o])==null?void 0:a.call(i,s)})},[e]),t]}const Ur={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Yr={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Kr(e){let{announcements:t=Yr,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=Ur}=e;const{announce:s,announcement:i}=Wr(),a=Ue("DndLiveRegion"),[c,u]=l.useState(!1);if(l.useEffect(()=>{u(!0)},[]),$r(l.useMemo(()=>({onDragStart(f){let{active:p}=f;s(t.onDragStart({active:p}))},onDragMove(f){let{active:p,over:g}=f;t.onDragMove&&s(t.onDragMove({active:p,over:g}))},onDragOver(f){let{active:p,over:g}=f;s(t.onDragOver({active:p,over:g}))},onDragEnd(f){let{active:p,over:g}=f;s(t.onDragEnd({active:p,over:g}))},onDragCancel(f){let{active:p,over:g}=f;s(t.onDragCancel({active:p,over:g}))}}),[s,t])),!c)return null;const d=X.createElement(X.Fragment,null,X.createElement(Fr,{id:r,value:o.draggable}),X.createElement(Hr,{id:a,announcement:i}));return n?ze.createPortal(d,n):d}var L;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(L||(L={}));function tt(){}function Vr(e,t){return l.useMemo(()=>({sensor:e,options:{}}),[e,t])}function qr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Z=Object.freeze({x:0,y:0});function Gr(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function _r(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Jr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Qr(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Gt(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Zr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=Gt(t,t.left,t.top),s=[];for(const i of r){const{id:a}=i,c=n.get(a);if(c){const u=Gr(Gt(c),o);s.push({id:a,data:{droppableContainer:i,value:u}})}}return s.sort(_r)};function eo(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),i=o-r,a=s-n;if(r<o&&n<s){const c=t.width*t.height,u=e.width*e.height,d=i*a,f=d/(c+u-d);return Number(f.toFixed(4))}return 0}const to=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const s of r){const{id:i}=s,a=n.get(i);if(a){const c=eo(a,t);c>0&&o.push({id:i,data:{droppableContainer:s,value:c}})}}return o.sort(Jr)};function no(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function wn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Z}function ro(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return o.reduce((i,a)=>({...i,top:i.top+e*a.y,bottom:i.bottom+e*a.y,left:i.left+e*a.x,right:i.right+e*a.x}),{...n})}}const oo=ro(1);function so(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function io(e,t,n){const r=so(t);if(!r)return e;const{scaleX:o,scaleY:s,x:i,y:a}=r,c=e.left-i-(1-o)*parseFloat(n),u=e.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),d=o?e.width/o:e.width,f=s?e.height/s:e.height;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c}}const ao={ignoreTransform:!1};function Ie(e,t){t===void 0&&(t=ao);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=U(e).getComputedStyle(e);u&&(n=io(n,u,d))}const{top:r,left:o,width:s,height:i,bottom:a,right:c}=n;return{top:r,left:o,width:s,height:i,bottom:a,right:c}}function _t(e){return Ie(e,{ignoreTransform:!0})}function lo(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function co(e,t){return t===void 0&&(t=U(e).getComputedStyle(e)),t.position==="fixed"}function uo(e,t){t===void 0&&(t=U(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const s=t[o];return typeof s=="string"?n.test(s):!1})}function Tt(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(Rt(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!$e(o)||pn(o)||n.includes(o))return n;const s=U(e).getComputedStyle(o);return o!==e&&uo(o,s)&&n.push(o),co(o,s)?n:r(o.parentNode)}return e?r(e):n}function mn(e){const[t]=Tt(e,1);return t??null}function dt(e){return!rt||!e?null:Te(e)?e:Dt(e)?Rt(e)||e===Me(e).scrollingElement?window:$e(e)?e:null:null}function xn(e){return Te(e)?e.scrollX:e.scrollLeft}function yn(e){return Te(e)?e.scrollY:e.scrollTop}function mt(e){return{x:xn(e),y:yn(e)}}var B;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(B||(B={}));function Sn(e){return!rt||!e?!1:e===document.scrollingElement}function Cn(e){const t={x:0,y:0},n=Sn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:o,isLeft:s,isBottom:i,isRight:a,maxScroll:r,minScroll:t}}const fo={x:.2,y:.2};function ho(e,t,n,r,o){let{top:s,left:i,right:a,bottom:c}=n;r===void 0&&(r=10),o===void 0&&(o=fo);const{isTop:u,isBottom:d,isLeft:f,isRight:p}=Cn(e),g={x:0,y:0},I={x:0,y:0},v={height:t.height*o.y,width:t.width*o.x};return!u&&s<=t.top+v.height?(g.y=B.Backward,I.y=r*Math.abs((t.top+v.height-s)/v.height)):!d&&c>=t.bottom-v.height&&(g.y=B.Forward,I.y=r*Math.abs((t.bottom-v.height-c)/v.height)),!p&&a>=t.right-v.width?(g.x=B.Forward,I.x=r*Math.abs((t.right-v.width-a)/v.width)):!f&&i<=t.left+v.width&&(g.x=B.Backward,I.x=r*Math.abs((t.left+v.width-i)/v.width)),{direction:g,speed:I}}function go(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:i}=window;return{top:0,left:0,right:s,bottom:i,width:s,height:i}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function Dn(e){return e.reduce((t,n)=>Ee(t,mt(n)),Z)}function po(e){return e.reduce((t,n)=>t+xn(n),0)}function vo(e){return e.reduce((t,n)=>t+yn(n),0)}function bo(e,t){if(t===void 0&&(t=Ie),!e)return;const{top:n,left:r,bottom:o,right:s}=t(e);mn(e)&&(o<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const wo=[["x",["left","right"],po],["y",["top","bottom"],vo]];class Mt{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Tt(n),o=Dn(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,i,a]of wo)for(const c of i)Object.defineProperty(this,c,{get:()=>{const u=a(r),d=o[s]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Pe{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function mo(e){const{EventTarget:t}=U(e);return e instanceof t?e:Me(e)}function ft(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var J;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(J||(J={}));function Jt(e){e.preventDefault()}function xo(e){e.stopPropagation()}var T;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(T||(T={}));const Rn={start:[T.Space,T.Enter],cancel:[T.Esc],end:[T.Space,T.Enter,T.Tab]},yo=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case T.Right:return{...n,x:n.x+25};case T.Left:return{...n,x:n.x-25};case T.Down:return{...n,y:n.y+25};case T.Up:return{...n,y:n.y-25}}};class En{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Pe(Me(n)),this.windowListeners=new Pe(U(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(J.Resize,this.handleCancel),this.windowListeners.add(J.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(J.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&bo(r),n(Z)}handleKeyDown(t){if(kt(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:s=Rn,coordinateGetter:i=yo,scrollBehavior:a="smooth"}=o,{code:c}=t;if(s.end.includes(c)){this.handleEnd(t);return}if(s.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:Z;this.referenceCoordinates||(this.referenceCoordinates=d);const f=i(t,{active:n,context:r.current,currentCoordinates:d});if(f){const p=et(f,d),g={x:0,y:0},{scrollableAncestors:I}=r.current;for(const v of I){const b=t.code,{isTop:C,isRight:y,isLeft:S,isBottom:R,maxScroll:E,minScroll:M}=Cn(v),D=go(v),x={x:Math.min(b===T.Right?D.right-D.width/2:D.right,Math.max(b===T.Right?D.left:D.left+D.width/2,f.x)),y:Math.min(b===T.Down?D.bottom-D.height/2:D.bottom,Math.max(b===T.Down?D.top:D.top+D.height/2,f.y))},j=b===T.Right&&!y||b===T.Left&&!S,N=b===T.Down&&!R||b===T.Up&&!C;if(j&&x.x!==f.x){const m=v.scrollLeft+p.x,k=b===T.Right&&m<=E.x||b===T.Left&&m>=M.x;if(k&&!p.y){v.scrollTo({left:m,behavior:a});return}k?g.x=v.scrollLeft-m:g.x=b===T.Right?v.scrollLeft-E.x:v.scrollLeft-M.x,g.x&&v.scrollBy({left:-g.x,behavior:a});break}else if(N&&x.y!==f.y){const m=v.scrollTop+p.y,k=b===T.Down&&m<=E.y||b===T.Up&&m>=M.y;if(k&&!p.x){v.scrollTo({top:m,behavior:a});return}k?g.y=v.scrollTop-m:g.y=b===T.Down?v.scrollTop-E.y:v.scrollTop-M.y,g.y&&v.scrollBy({top:-g.y,behavior:a});break}}this.handleMove(t,Ee(et(f,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}En.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Rn,onActivation:o}=t,{active:s}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const a=s.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),o==null||o({event:e.nativeEvent}),!0)}return!1}}];function Qt(e){return!!(e&&"distance"in e)}function Zt(e){return!!(e&&"delay"in e)}class It{constructor(t,n,r){var o;r===void 0&&(r=mo(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:i}=s;this.props=t,this.events=n,this.document=Me(i),this.documentListeners=new Pe(this.document),this.listeners=new Pe(r),this.windowListeners=new Pe(U(i)),this.initialCoordinates=(o=wt(s))!=null?o:Z,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(J.Resize,this.handleCancel),this.windowListeners.add(J.DragStart,Jt),this.windowListeners.add(J.VisibilityChange,this.handleCancel),this.windowListeners.add(J.ContextMenu,Jt),this.documentListeners.add(J.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Zt(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Qt(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(J.Click,xo,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(J.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:s}=this,{onMove:i,options:{activationConstraint:a}}=s;if(!o)return;const c=(n=wt(t))!=null?n:Z,u=et(o,c);if(!r&&a){if(Qt(a)){if(a.tolerance!=null&&ft(u,a.tolerance))return this.handleCancel();if(ft(u,a.distance))return this.handleStart()}if(Zt(a)&&ft(u,a.tolerance))return this.handleCancel();this.handlePending(a,u);return}t.cancelable&&t.preventDefault(),i(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===T.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const So={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class At extends It{constructor(t){const{event:n}=t,r=Me(n.target);super(t,So,r)}}At.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Co={move:{name:"mousemove"},end:{name:"mouseup"}};var xt;(function(e){e[e.RightClick=2]="RightClick"})(xt||(xt={}));class Do extends It{constructor(t){super(t,Co,Me(t.event.target))}}Do.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===xt.RightClick?!1:(r==null||r({event:n}),!0)}}];const ht={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ro extends It{constructor(t){super(t,ht)}static setup(){return window.addEventListener(ht.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(ht.move.name,t)};function t(){}}}Ro.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r==null||r({event:n}),!0)}}];var Be;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Be||(Be={}));var nt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(nt||(nt={}));function Eo(e){let{acceleration:t,activator:n=Be.Pointer,canScroll:r,draggingRect:o,enabled:s,interval:i=5,order:a=nt.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:p}=e;const g=To({delta:f,disabled:!s}),[I,v]=Nr(),b=l.useRef({x:0,y:0}),C=l.useRef({x:0,y:0}),y=l.useMemo(()=>{switch(n){case Be.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Be.DraggableRect:return o}},[n,o,c]),S=l.useRef(null),R=l.useCallback(()=>{const M=S.current;if(!M)return;const D=b.current.x*C.current.x,x=b.current.y*C.current.y;M.scrollBy(D,x)},[]),E=l.useMemo(()=>a===nt.TreeOrder?[...u].reverse():u,[a,u]);l.useEffect(()=>{if(!s||!u.length||!y){v();return}for(const M of E){if((r==null?void 0:r(M))===!1)continue;const D=u.indexOf(M),x=d[D];if(!x)continue;const{direction:j,speed:N}=ho(M,x,y,t,p);for(const m of["x","y"])g[m][j[m]]||(N[m]=0,j[m]=0);if(N.x>0||N.y>0){v(),S.current=M,I(R,i),b.current=N,C.current=j;return}}b.current={x:0,y:0},C.current={x:0,y:0},v()},[t,R,r,v,s,i,JSON.stringify(y),JSON.stringify(g),I,u,E,d,JSON.stringify(p)])}const ko={x:{[B.Backward]:!1,[B.Forward]:!1},y:{[B.Backward]:!1,[B.Forward]:!1}};function To(e){let{delta:t,disabled:n}=e;const r=bt(t);return Xe(o=>{if(n||!r||!o)return ko;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[B.Backward]:o.x[B.Backward]||s.x===-1,[B.Forward]:o.x[B.Forward]||s.x===1},y:{[B.Backward]:o.y[B.Backward]||s.y===-1,[B.Forward]:o.y[B.Forward]||s.y===1}}},[n,t,r])}function Mo(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Xe(o=>{var s;return t==null?null:(s=r??o)!=null?s:null},[r,t])}function Io(e,t){return l.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,s=o.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...s]},[]),[e,t])}var We;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(We||(We={}));var yt;(function(e){e.Optimized="optimized"})(yt||(yt={}));const en=new Map;function Ao(e,t){let{dragging:n,dependencies:r,config:o}=t;const[s,i]=l.useState(null),{frequency:a,measure:c,strategy:u}=o,d=l.useRef(e),f=b(),p=He(f),g=l.useCallback(function(C){C===void 0&&(C=[]),!p.current&&i(y=>y===null?C:y.concat(C.filter(S=>!y.includes(S))))},[p]),I=l.useRef(null),v=Xe(C=>{if(f&&!n)return en;if(!C||C===en||d.current!==e||s!=null){const y=new Map;for(let S of e){if(!S)continue;if(s&&s.length>0&&!s.includes(S.id)&&S.rect.current){y.set(S.id,S.rect.current);continue}const R=S.node.current,E=R?new Mt(c(R),R):null;S.rect.current=E,E&&y.set(S.id,E)}return y}return C},[e,s,n,f,c]);return l.useEffect(()=>{d.current=e},[e]),l.useEffect(()=>{f||g()},[n,f]),l.useEffect(()=>{s&&s.length>0&&i(null)},[JSON.stringify(s)]),l.useEffect(()=>{f||typeof a!="number"||I.current!==null||(I.current=setTimeout(()=>{g(),I.current=null},a))},[a,f,g,...r]),{droppableRects:v,measureDroppableContainers:g,measuringScheduled:s!=null};function b(){switch(u){case We.Always:return!1;case We.BeforeDragging:return n;default:return!n}}}function kn(e,t){return Xe(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function jo(e,t){return kn(e,t)}function Oo(e){let{callback:t,disabled:n}=e;const r=Et(t),o=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return l.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function ot(e){let{callback:t,disabled:n}=e;const r=Et(t),o=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return l.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function No(e){return new Mt(Ie(e),e)}function tn(e,t,n){t===void 0&&(t=No);const[r,o]=l.useState(null);function s(){o(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??n)!=null?u:null}const d=t(e);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const i=Oo({callback(c){if(e)for(const u of c){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){s();break}}}}),a=ot({callback:s});return se(()=>{s(),e?(a==null||a.observe(e),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),i==null||i.disconnect())},[e]),r}function Lo(e){const t=kn(e);return wn(e,t)}const nn=[];function zo(e){const t=l.useRef(e),n=Xe(r=>e?r&&r!==nn&&e&&t.current&&e.parentNode===t.current.parentNode?r:Tt(e):nn,[e]);return l.useEffect(()=>{t.current=e},[e]),n}function Po(e){const[t,n]=l.useState(null),r=l.useRef(e),o=l.useCallback(s=>{const i=dt(s.target);i&&n(a=>a?(a.set(i,mt(i)),new Map(a)):null)},[]);return l.useEffect(()=>{const s=r.current;if(e!==s){i(s);const a=e.map(c=>{const u=dt(c);return u?(u.addEventListener("scroll",o,{passive:!0}),[u,mt(u)]):null}).filter(c=>c!=null);n(a.length?new Map(a):null),r.current=e}return()=>{i(e),i(s)};function i(a){a.forEach(c=>{const u=dt(c);u==null||u.removeEventListener("scroll",o)})}},[o,e]),l.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,i)=>Ee(s,i),Z):Dn(e):Z,[e,t])}function rn(e,t){t===void 0&&(t=[]);const n=l.useRef(null);return l.useEffect(()=>{n.current=null},t),l.useEffect(()=>{const r=e!==Z;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?et(e,n.current):Z}function Bo(e){l.useEffect(()=>{if(!rt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Fo(e,t){return l.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:s}=r;return n[o]=i=>{s(i,t)},n},{}),[e,t])}function Tn(e){return l.useMemo(()=>e?lo(e):null,[e])}const on=[];function Ho(e,t){t===void 0&&(t=Ie);const[n]=e,r=Tn(n?U(n):null),[o,s]=l.useState(on);function i(){s(()=>e.length?e.map(c=>Sn(c)?r:new Mt(t(c),c)):on)}const a=ot({callback:i});return se(()=>{a==null||a.disconnect(),i(),e.forEach(c=>a==null?void 0:a.observe(c))},[e]),o}function Wo(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return $e(t)?t:e}function $o(e){let{measure:t}=e;const[n,r]=l.useState(null),o=l.useCallback(u=>{for(const{target:d}of u)if($e(d)){r(f=>{const p=t(d);return f?{...f,width:p.width,height:p.height}:p});break}},[t]),s=ot({callback:o}),i=l.useCallback(u=>{const d=Wo(u);s==null||s.disconnect(),d&&(s==null||s.observe(d)),r(d?t(d):null)},[t,s]),[a,c]=Ze(i);return l.useMemo(()=>({nodeRef:a,rect:n,setRef:c}),[n,a,c])}const Xo=[{sensor:At,options:{}},{sensor:En,options:{}}],Uo={current:{}},Qe={draggable:{measure:_t},droppable:{measure:_t,strategy:We.WhileDragging,frequency:yt.Optimized},dragOverlay:{measure:Ie}};class Fe extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Yo={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Fe,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:tt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Qe,measureDroppableContainers:tt,windowRect:null,measuringScheduled:!1},Ko={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:tt,draggableNodes:new Map,over:null,measureDroppableContainers:tt},st=l.createContext(Ko),Mn=l.createContext(Yo);function Vo(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Fe}}}function qo(e,t){switch(t.type){case L.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case L.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case L.DragEnd:case L.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case L.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new Fe(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case L.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const i=new Fe(e.droppable.containers);return i.set(n,{...s,disabled:o}),{...e,droppable:{...e.droppable,containers:i}}}case L.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const s=new Fe(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function Go(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=l.useContext(st),s=bt(r),i=bt(n==null?void 0:n.id);return l.useEffect(()=>{if(!t&&!r&&s&&i!=null){if(!kt(s)||document.activeElement===s.target)return;const a=o.get(i);if(!a)return;const{activatorNode:c,node:u}=a;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const f=Pr(d);if(f){f.focus();break}}})}},[r,t,o,i,s]),null}function _o(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,s)=>s({transform:o,...r}),n):n}function Jo(e){return l.useMemo(()=>({draggable:{...Qe.draggable,...e==null?void 0:e.draggable},droppable:{...Qe.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Qe.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Qo(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const s=l.useRef(!1),{x:i,y:a}=typeof o=="boolean"?{x:o,y:o}:o;se(()=>{if(!i&&!a||!t){s.current=!1;return}if(s.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=n(u),f=wn(d,r);if(i||(f.x=0),a||(f.y=0),s.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=mn(u);p&&p.scrollBy({top:f.y,left:f.x})}},[t,i,a,r,n])}const In=l.createContext({...Z,scaleX:1,scaleY:1});var be;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(be||(be={}));const Zo=l.memo(function(t){var n,r,o,s;let{id:i,accessibility:a,autoScroll:c=!0,children:u,sensors:d=Xo,collisionDetection:f=to,measuring:p,modifiers:g,...I}=t;const v=l.useReducer(qo,void 0,Vo),[b,C]=v,[y,S]=Xr(),[R,E]=l.useState(be.Uninitialized),M=R===be.Initialized,{draggable:{active:D,nodes:x,translate:j},droppable:{containers:N}}=b,m=D!=null?x.get(D):null,k=l.useRef({initial:null,translated:null}),O=l.useMemo(()=>{var H;return D!=null?{id:D,data:(H=m==null?void 0:m.data)!=null?H:Uo,rect:k}:null},[D,m]),W=l.useRef(null),[q,me]=l.useState(null),[z,ce]=l.useState(null),Q=He(I,Object.values(I)),w=Ue("DndDescribedBy",i),ee=l.useMemo(()=>N.getEnabled(),[N]),P=Jo(p),{droppableRects:G,measureDroppableContainers:te,measuringScheduled:we}=Ao(ee,{dragging:M,dependencies:[j.x,j.y],config:P.droppable}),$=Mo(x,D),Ye=l.useMemo(()=>z?wt(z):null,[z]),ue=Xn(),ie=jo($,P.draggable.measure);Qo({activeNode:D!=null?x.get(D):null,config:ue.layoutShiftCompensation,initialRect:ie,measure:P.draggable.measure});const A=tn($,P.draggable.measure,ie),Ae=tn($?$.parentElement:null),ne=l.useRef({activatorEvent:null,active:null,activeNode:$,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:x,draggingNode:null,draggingNodeRect:null,droppableContainers:N,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),xe=N.getNodeFor((n=ne.current.over)==null?void 0:n.id),ae=$o({measure:P.dragOverlay.measure}),ye=(r=ae.nodeRef.current)!=null?r:$,Se=M?(o=ae.rect)!=null?o:A:null,Ot=!!(ae.nodeRef.current&&ae.rect),Nt=Lo(Ot?null:A),it=Tn(ye?U(ye):null),de=zo(M?xe??$:null),Ke=Ho(de),Ve=_o(g,{transform:{x:j.x-Nt.x,y:j.y-Nt.y,scaleX:1,scaleY:1},activatorEvent:z,active:O,activeNodeRect:A,containerNodeRect:Ae,draggingNodeRect:Se,over:ne.current.over,overlayNodeRect:ae.rect,scrollableAncestors:de,scrollableAncestorRects:Ke,windowRect:it}),Lt=Ye?Ee(Ye,j):null,zt=Po(de),zn=rn(zt),Pn=rn(zt,[A]),Ce=Ee(Ve,zn),De=Se?oo(Se,Ve):null,je=O&&De?f({active:O,collisionRect:De,droppableRects:G,droppableContainers:ee,pointerCoordinates:Lt}):null,Pt=Qr(je,"id"),[fe,Bt]=l.useState(null),Bn=Ot?Ve:Ee(Ve,Pn),Fn=no(Bn,(s=fe==null?void 0:fe.rect)!=null?s:null,A),at=l.useRef(null),Ft=l.useCallback((H,Y)=>{let{sensor:K,options:he}=Y;if(W.current==null)return;const _=x.get(W.current);if(!_)return;const V=H.nativeEvent,re=new K({active:W.current,activeNode:_,event:V,options:he,context:ne,onAbort(F){if(!x.get(F))return;const{onDragAbort:oe}=Q.current,le={id:F};oe==null||oe(le),y({type:"onDragAbort",event:le})},onPending(F,ge,oe,le){if(!x.get(F))return;const{onDragPending:Ne}=Q.current,pe={id:F,constraint:ge,initialCoordinates:oe,offset:le};Ne==null||Ne(pe),y({type:"onDragPending",event:pe})},onStart(F){const ge=W.current;if(ge==null)return;const oe=x.get(ge);if(!oe)return;const{onDragStart:le}=Q.current,Oe={activatorEvent:V,active:{id:ge,data:oe.data,rect:k}};ze.unstable_batchedUpdates(()=>{le==null||le(Oe),E(be.Initializing),C({type:L.DragStart,initialCoordinates:F,active:ge}),y({type:"onDragStart",event:Oe}),me(at.current),ce(V)})},onMove(F){C({type:L.DragMove,coordinates:F})},onEnd:Re(L.DragEnd),onCancel:Re(L.DragCancel)});at.current=re;function Re(F){return async function(){const{active:oe,collisions:le,over:Oe,scrollAdjustedTranslate:Ne}=ne.current;let pe=null;if(oe&&Ne){const{cancelDrop:Le}=Q.current;pe={activatorEvent:V,active:oe,collisions:le,delta:Ne,over:Oe},F===L.DragEnd&&typeof Le=="function"&&await Promise.resolve(Le(pe))&&(F=L.DragCancel)}W.current=null,ze.unstable_batchedUpdates(()=>{C({type:F}),E(be.Uninitialized),Bt(null),me(null),ce(null),at.current=null;const Le=F===L.DragEnd?"onDragEnd":"onDragCancel";if(pe){const lt=Q.current[Le];lt==null||lt(pe),y({type:Le,event:pe})}})}}},[x]),Hn=l.useCallback((H,Y)=>(K,he)=>{const _=K.nativeEvent,V=x.get(he);if(W.current!==null||!V||_.dndKit||_.defaultPrevented)return;const re={active:V};H(K,Y.options,re)===!0&&(_.dndKit={capturedBy:Y.sensor},W.current=he,Ft(K,Y))},[x,Ft]),Ht=Io(d,Hn);Bo(d),se(()=>{A&&R===be.Initializing&&E(be.Initialized)},[A,R]),l.useEffect(()=>{const{onDragMove:H}=Q.current,{active:Y,activatorEvent:K,collisions:he,over:_}=ne.current;if(!Y||!K)return;const V={active:Y,activatorEvent:K,collisions:he,delta:{x:Ce.x,y:Ce.y},over:_};ze.unstable_batchedUpdates(()=>{H==null||H(V),y({type:"onDragMove",event:V})})},[Ce.x,Ce.y]),l.useEffect(()=>{const{active:H,activatorEvent:Y,collisions:K,droppableContainers:he,scrollAdjustedTranslate:_}=ne.current;if(!H||W.current==null||!Y||!_)return;const{onDragOver:V}=Q.current,re=he.get(Pt),Re=re&&re.rect.current?{id:re.id,rect:re.rect.current,data:re.data,disabled:re.disabled}:null,F={active:H,activatorEvent:Y,collisions:K,delta:{x:_.x,y:_.y},over:Re};ze.unstable_batchedUpdates(()=>{Bt(Re),V==null||V(F),y({type:"onDragOver",event:F})})},[Pt]),se(()=>{ne.current={activatorEvent:z,active:O,activeNode:$,collisionRect:De,collisions:je,droppableRects:G,draggableNodes:x,draggingNode:ye,draggingNodeRect:Se,droppableContainers:N,over:fe,scrollableAncestors:de,scrollAdjustedTranslate:Ce},k.current={initial:Se,translated:De}},[O,$,je,De,x,ye,Se,G,N,fe,de,Ce]),Eo({...ue,delta:j,draggingRect:De,pointerCoordinates:Lt,scrollableAncestors:de,scrollableAncestorRects:Ke});const Wn=l.useMemo(()=>({active:O,activeNode:$,activeNodeRect:A,activatorEvent:z,collisions:je,containerNodeRect:Ae,dragOverlay:ae,draggableNodes:x,droppableContainers:N,droppableRects:G,over:fe,measureDroppableContainers:te,scrollableAncestors:de,scrollableAncestorRects:Ke,measuringConfiguration:P,measuringScheduled:we,windowRect:it}),[O,$,A,z,je,Ae,ae,x,N,G,fe,te,de,Ke,P,we,it]),$n=l.useMemo(()=>({activatorEvent:z,activators:Ht,active:O,activeNodeRect:A,ariaDescribedById:{draggable:w},dispatch:C,draggableNodes:x,over:fe,measureDroppableContainers:te}),[z,Ht,O,A,C,w,x,fe,te]);return X.createElement(bn.Provider,{value:S},X.createElement(st.Provider,{value:$n},X.createElement(Mn.Provider,{value:Wn},X.createElement(In.Provider,{value:Fn},u)),X.createElement(Go,{disabled:(a==null?void 0:a.restoreFocus)===!1})),X.createElement(Kr,{...a,hiddenTextDescribedById:w}));function Xn(){const H=(q==null?void 0:q.autoScrollEnabled)===!1,Y=typeof c=="object"?c.enabled===!1:c===!1,K=M&&!H&&!Y;return typeof c=="object"?{...c,enabled:K}:{enabled:K}}}),es=l.createContext(null),sn="button",ts="Draggable";function ns(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const s=Ue(ts),{activators:i,activatorEvent:a,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:p}=l.useContext(st),{role:g=sn,roleDescription:I="draggable",tabIndex:v=0}=o??{},b=(c==null?void 0:c.id)===t,C=l.useContext(b?In:es),[y,S]=Ze(),[R,E]=Ze(),M=Fo(i,t),D=He(n);se(()=>(f.set(t,{id:t,key:s,node:y,activatorNode:R,data:D}),()=>{const j=f.get(t);j&&j.key===s&&f.delete(t)}),[f,t]);const x=l.useMemo(()=>({role:g,tabIndex:v,"aria-disabled":r,"aria-pressed":b&&g===sn?!0:void 0,"aria-roledescription":I,"aria-describedby":d.draggable}),[r,g,v,b,I,d.draggable]);return{active:c,activatorEvent:a,activeNodeRect:u,attributes:x,isDragging:b,listeners:r?void 0:M,node:y,over:p,setNodeRef:S,setActivatorNodeRef:E,transform:C}}function rs(){return l.useContext(Mn)}const os="Droppable",ss={timeout:25};function is(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const s=Ue(os),{active:i,dispatch:a,over:c,measureDroppableContainers:u}=l.useContext(st),d=l.useRef({disabled:n}),f=l.useRef(!1),p=l.useRef(null),g=l.useRef(null),{disabled:I,updateMeasurementsFor:v,timeout:b}={...ss,...o},C=He(v??r),y=l.useCallback(()=>{if(!f.current){f.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(C.current)?C.current:[C.current]),g.current=null},b)},[b]),S=ot({callback:y,disabled:I||!i}),R=l.useCallback((x,j)=>{S&&(j&&(S.unobserve(j),f.current=!1),x&&S.observe(x))},[S]),[E,M]=Ze(R),D=He(t);return l.useEffect(()=>{!S||!E.current||(S.disconnect(),f.current=!1,S.observe(E.current))},[E,S]),l.useEffect(()=>(a({type:L.RegisterDroppable,element:{id:r,key:s,disabled:n,node:E,rect:p,data:D}}),()=>a({type:L.UnregisterDroppable,key:s,id:r})),[r]),l.useEffect(()=>{n!==d.current.disabled&&(a({type:L.SetDroppableDisabled,id:r,key:s,disabled:n}),d.current.disabled=n)},[r,s,n,a]),{active:i,rect:p,isOver:(c==null?void 0:c.id)===r,node:E,over:c,setNodeRef:M}}const as=e=>{let{transform:t}=e;return{...t,y:0}};function jt(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function ls(e,t){return e.reduce((n,r,o)=>{const s=t.get(r);return s&&(n[o]=s),n},Array(e.length))}function qe(e){return e!==null&&e>=0}function cs(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function us(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Ge={scaleX:1,scaleY:1},ds=e=>{var t;let{rects:n,activeNodeRect:r,activeIndex:o,overIndex:s,index:i}=e;const a=(t=n[o])!=null?t:r;if(!a)return null;const c=fs(n,i,o);if(i===o){const u=n[s];return u?{x:o<s?u.left+u.width-(a.left+a.width):u.left-a.left,y:0,...Ge}:null}return i>o&&i<=s?{x:-a.width-c,y:0,...Ge}:i<o&&i>=s?{x:a.width+c,y:0,...Ge}:{x:0,y:0,...Ge}};function fs(e,t,n){const r=e[t],o=e[t-1],s=e[t+1];return!r||!o&&!s?0:n<t?o?r.left-(o.left+o.width):s.left-(r.left+r.width):s?s.left-(r.left+r.width):r.left-(o.left+o.width)}const An=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const s=jt(t,r,n),i=t[o],a=s[o];return!a||!i?null:{x:a.left-i.left,y:a.top-i.top,scaleX:a.width/i.width,scaleY:a.height/i.height}},jn="Sortable",On=X.createContext({activeIndex:-1,containerId:jn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:An,disabled:{draggable:!1,droppable:!1}});function hs(e){let{children:t,id:n,items:r,strategy:o=An,disabled:s=!1}=e;const{active:i,dragOverlay:a,droppableRects:c,over:u,measureDroppableContainers:d}=rs(),f=Ue(jn,n),p=a.rect!==null,g=l.useMemo(()=>r.map(M=>typeof M=="object"&&"id"in M?M.id:M),[r]),I=i!=null,v=i?g.indexOf(i.id):-1,b=u?g.indexOf(u.id):-1,C=l.useRef(g),y=!cs(g,C.current),S=b!==-1&&v===-1||y,R=us(s);se(()=>{y&&I&&d(g)},[y,g,I,d]),l.useEffect(()=>{C.current=g},[g]);const E=l.useMemo(()=>({activeIndex:v,containerId:f,disabled:R,disableTransforms:S,items:g,overIndex:b,useDragOverlay:p,sortedRects:ls(g,c),strategy:o}),[v,f,R.draggable,R.droppable,S,g,b,c,p,o]);return X.createElement(On.Provider,{value:E},t)}const gs=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return jt(n,r,o).indexOf(t)},ps=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:s,newIndex:i,previousItems:a,previousContainerId:c,transition:u}=e;return!u||!r||a!==s&&o===i?!1:n?!0:i!==o&&t===c},vs={duration:200,easing:"ease"},Nn="transform",bs=ke.Transition.toString({property:Nn,duration:0,easing:"linear"}),ws={roleDescription:"sortable"};function ms(e){let{disabled:t,index:n,node:r,rect:o}=e;const[s,i]=l.useState(null),a=l.useRef(n);return se(()=>{if(!t&&n!==a.current&&r.current){const c=o.current;if(c){const u=Ie(r.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&i(d)}}n!==a.current&&(a.current=n)},[t,n,r,o]),l.useEffect(()=>{s&&i(null)},[s]),s}function Ln(e){let{animateLayoutChanges:t=ps,attributes:n,disabled:r,data:o,getNewIndex:s=gs,id:i,strategy:a,resizeObserverConfig:c,transition:u=vs}=e;const{items:d,containerId:f,activeIndex:p,disabled:g,disableTransforms:I,sortedRects:v,overIndex:b,useDragOverlay:C,strategy:y}=l.useContext(On),S=xs(r,g),R=d.indexOf(i),E=l.useMemo(()=>({sortable:{containerId:f,index:R,items:d},...o}),[f,o,R,d]),M=l.useMemo(()=>d.slice(d.indexOf(i)),[d,i]),{rect:D,node:x,isOver:j,setNodeRef:N}=is({id:i,data:E,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...c}}),{active:m,activatorEvent:k,activeNodeRect:O,attributes:W,setNodeRef:q,listeners:me,isDragging:z,over:ce,setActivatorNodeRef:Q,transform:w}=ns({id:i,data:E,attributes:{...ws,...n},disabled:S.draggable}),ee=Or(N,q),P=!!m,G=P&&!I&&qe(p)&&qe(b),te=!C&&z,we=te&&G?w:null,Ye=G?we??(a??y)({rects:v,activeNodeRect:O,activeIndex:p,overIndex:b,index:R}):null,ue=qe(p)&&qe(b)?s({id:i,items:d,activeIndex:p,overIndex:b}):R,ie=m==null?void 0:m.id,A=l.useRef({activeId:ie,items:d,newIndex:ue,containerId:f}),Ae=d!==A.current.items,ne=t({active:m,containerId:f,isDragging:z,isSorting:P,id:i,index:R,items:d,newIndex:A.current.newIndex,previousItems:A.current.items,previousContainerId:A.current.containerId,transition:u,wasDragging:A.current.activeId!=null}),xe=ms({disabled:!ne,index:R,node:x,rect:D});return l.useEffect(()=>{P&&A.current.newIndex!==ue&&(A.current.newIndex=ue),f!==A.current.containerId&&(A.current.containerId=f),d!==A.current.items&&(A.current.items=d)},[P,ue,f,d]),l.useEffect(()=>{if(ie===A.current.activeId)return;if(ie!=null&&A.current.activeId==null){A.current.activeId=ie;return}const ye=setTimeout(()=>{A.current.activeId=ie},50);return()=>clearTimeout(ye)},[ie]),{active:m,activeIndex:p,attributes:W,data:E,rect:D,index:R,newIndex:ue,items:d,isOver:j,isSorting:P,isDragging:z,listeners:me,node:x,overIndex:b,over:ce,setNodeRef:ee,setActivatorNodeRef:Q,setDroppableNodeRef:N,setDraggableNodeRef:q,transform:xe??Ye,transition:ae()};function ae(){if(xe||Ae&&A.current.newIndex===R)return bs;if(!(te&&!kt(k)||!u)&&(P||ne))return ke.Transition.toString({...u,property:Nn})}}function xs(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}T.Down,T.Right,T.Up,T.Left;function ys(){const{seasonStickyHeader:e,seasonShowReorder:t,seasonShowCheckboxes:n,seasonShowCarsDropdown:r,seasonHighlight:o,seasonShowThisWeek:s,seasonShowWishlist:i,seasonShowOwned:a}=St(),c=[{id:"checkboxes",text:"Show content checkboxes",tooltip:"Show track checkboxes to quickly switch tracks you own",checked:n,setChecked:Un},{id:"cars",text:"Show cars dropdown",tooltip:"Show cars dropdown to quickly switch cars you own",checked:r,setChecked:Yn},{id:"hover",text:"Highlight on track hover",tooltip:"Highlight all cells with the same hovered track",checked:o,setChecked:Kn},{id:"sticky",text:"Sticky headers",tooltip:"Keep column headers always visible.",checked:e,setChecked:Vn},{id:"reorder",text:"Drag and drop to reorder",tooltip:"Enable columns drag and drop to reorder series",checked:t,setChecked:qn},{id:"thisWeek",text:"Highlight current week",tooltip:"Highlight current week row",checked:s,setChecked:Gn},{id:"wishlist",text:"Show wishlist",tooltip:"Either wishlist items should be colored",checked:i,setChecked:_n},{id:"owned",text:"Show owned",tooltip:"Either owned items should be colored",checked:a,setChecked:Jn}];return h.jsx(an,{alignItems:"start",p:2,children:h.jsx(_e,{each:c,children:u=>h.jsx(gt,{lazyMount:!0,unmountOnExit:!0,content:u.tooltip,showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,ids:{trigger:u.id},children:h.jsx(pr,{ids:{root:u.id},checked:u.checked,onCheckedChange:({checked:d})=>u.setChecked(d),children:u.text})},u.id)})})}function Ss(){const{seasonCategory:e}=St();return h.jsxs(Ct,{justifyContent:{md:"space-between",base:"center"},alignItems:"start",children:[h.jsxs(ln,{positioning:{placement:"right-start"},children:[h.jsx(cn,{asChild:!0,children:h.jsx(Qn,{"aria-label":"Settings",variant:"outline",size:"lg",bgColor:{base:"bg.muted",_hover:"bg"},borderRadius:"md",children:h.jsx(ve,{icon:Zn})})}),h.jsx(un,{children:h.jsx(ys,{})})]}),h.jsx(mr,{size:"sm",value:e,onValueChange:t=>er(t.value),variant:"enclosed",width:{md:"unset",base:"100%"},flex:{md:"unset",base:1},children:h.jsx(xr,{flex:{md:"unset",base:1},width:{md:"unset",base:"100%"},children:Object.entries(pt).map(([t,n])=>h.jsxs(yr,{value:n,width:{md:"unset",base:"100%"},children:[h.jsx(Ir,{category:t}),h.jsx(Je,{hideBelow:n==="All"?void 0:"md",textWrap:"nowrap",userSelect:"none",children:n})]},n))})})]})}function Cs(){const{myTracks:e,wishTracks:t,favoriteSeries:n}=dn(),{height:r}=tr(),o=i=>r<=680?void 0:i,s=l.useMemo(()=>n.reduce((i,a)=>([...new Set(vt[a.toString()].weeks.map(c=>c.track.id))].forEach(c=>{const u=fn[c.toString()];if(u){const d=u.free?0:1,f=e.includes(u.sku)?1:0,p=t.includes(u.sku)?1:0;i.free=i.free+d,i.owned=i.owned+f,i.wish=i.wish+p}}),i),{free:0,owned:0,wish:0}),[e,t,n]);return h.jsxs(Ct,{padding:{base:"unset",md:o(4)},justifyContent:"space-between",alignItems:"start",children:[h.jsx(nr,{children:h.jsx(jr,{title:"My Season Planner",description:"Plan your season weeks, you can drag and drop series columns"})}),h.jsx(Ar,{freeCount:s.free,ownedCount:s.owned,wishCount:s.wish})]})}function Ds({dragEnabled:e,dragId:t,children:n,...r}){const{setNodeRef:o,transform:s,transition:i,isDragging:a}=Ln({id:t});return h.jsx(hn,{...r,ref:o,transform:ke.Transform.toString(s),transition:i,zIndex:a?10:void 0,children:n})}function Rs({dragEnabled:e,dragId:t,children:n,...r}){const{attributes:o,listeners:s,setNodeRef:i,transform:a,transition:c,isDragging:u}=Ln({id:t});return h.jsxs(gn,{...r,ref:i,transform:ke.Transform.toString(a),transition:c,zIndex:u?10:void 0,children:[e&&h.jsx(rr,{justifyContent:"center",position:"absolute",left:1,top:1,px:2,rounded:"4px",cursor:u?"grabbing":"grab",color:"fg.muted",...o,...s,children:h.jsx(ve,{icon:or})}),n]})}function Os(){const{weeksStartDates:e,seriesDateMap:t}=vr(),{myTracks:n,wishTracks:r,favoriteSeries:o}=dn(),[s,i]=l.useState(-1),{seasonStickyHeader:a,seasonShowReorder:c,seasonShowCheckboxes:u,seasonShowCarsDropdown:d,seasonHighlight:f,seasonShowWishlist:p,seasonShowOwned:g,seasonShowThisWeek:I,seasonCategory:v}=St(),[b,C]=sr(),[y,S]=l.useState(o);l.useEffect(()=>{const m=v===pt.all?o:o.filter(k=>pt[vt[k.toString()].category]===v);S(m)},[v,o]);const R=qr(Vr(At));function E(m){const{active:k,over:O}=m;if(O&&(k==null?void 0:k.id)!==(O==null?void 0:O.id)){const W=o.indexOf(k.id),q=o.indexOf(O.id);Tr(jt(o,W,q))}}const[M,D]=l.useState(!1),[x,j]=l.useState(!1),N=m=>{const k=m.currentTarget.scrollTop,O=x?k>0:k>60;j(O)};return h.jsxs(ct,{direction:"column",height:"100%",width:"100%",gap:"8px",children:[h.jsx(Cs,{}),o.length===0&&h.jsx(ct,{flex:1,borderRadius:"md",bgColor:"bg.muted",p:4,justifyContent:"center",children:h.jsx(Ut,{icon:h.jsx(ve,{icon:Wt}),title:"No series selected",description:"You didn't choose any favorite series",children:h.jsxs(ir,{variant:"marker",children:[h.jsx($t,{children:h.jsx(Xt,{onClick:()=>ar(!1),children:"Read the Help Page instructions"})}),h.jsx($t,{onClick:()=>C(lr.MySeries),children:h.jsx(Xt,{children:"Go directly to the My Series page"})})]})})}),o.length>0&&h.jsx(Ss,{}),o.length>0&&y.length===0&&h.jsx(ct,{flex:1,borderRadius:"md",bgColor:"bg.muted",p:4,children:h.jsx(Ut,{icon:h.jsx(ve,{icon:Wt}),title:"No series found",description:"Try different categories"})}),y.length>0&&h.jsx(Zo,{sensors:R,collisionDetection:Zr,onDragEnd:E,modifiers:[as],children:h.jsx(hs,{items:y,strategy:ds,disabled:!c,children:h.jsx(Sr,{borderRadius:"md",onScroll:a?N:void 0,children:h.jsxs(Cr,{size:"sm",showColumnBorder:!0,stickyHeader:a,children:[h.jsx(Dr,{children:h.jsxs(Yt,{bgColor:"bg.muted",children:[h.jsx(gn,{textAlign:"center",width:"60px",children:"Week"}),h.jsx(_e,{each:y,children:m=>{const k=vt[m.toString()];return h.jsx(Rs,{dragId:m,dragEnabled:c,width:"(100/x)%",position:"relative",bgColor:"currentBg",children:h.jsxs(h.Fragment,{children:[h.jsxs(an,{children:[k.logo&&h.jsx(cr,{loading:"lazy",userSelect:"none",draggable:!1,h:"40px",fit:"contain",src:`${Rr.image}/img/logos/series/${k.logo}`}),h.jsx(gt,{lazyMount:!0,unmountOnExit:!0,content:k.name,showArrow:!0,positioning:{placement:"bottom"},openDelay:200,closeDelay:100,children:h.jsx(Je,{textAlign:"center",lineClamp:"2",maxW:"200px",opacity:!a||!x?1:0,transition:"opacity 0.2s linear",onTransitionEnd:()=>D(x),children:(!a||!x||!M)&&k.name})})]}),d&&h.jsxs(ln,{lazyMount:!0,unmountOnExit:!0,children:[h.jsx(cn,{asChild:!0,children:h.jsxs(Ct,{gap:1,justifyContent:"center",cursor:"pointer",position:"absolute",right:1,top:1,bgColor:"bg.muted",px:2,rounded:"4px",children:[h.jsx(ve,{icon:ur}),k.cars.length,h.jsx(ve,{icon:dr})]})}),h.jsxs(un,{p:2,children:[h.jsx(Er,{}),h.jsx(Mr,{content:"cars",list:k.cars})]})]})]})},m)}})]})}),h.jsx(kr,{children:h.jsx(_e,{each:e,children:m=>{const k="en-US",O={year:"numeric",month:"long",day:"numeric"},W={month:"short",day:"numeric"},q=new Date(m),me=new Date(new Date(q).setUTCDate(q.getDate()+7)),z=I&&br(wr(new Date))===m;return h.jsxs(Yt,{bgColor:"bg.muted",height:"60px",borderYWidth:z?"2px":void 0,borderColor:z?"bg.inverted":void 0,children:[h.jsx(hn,{width:"60px",bgColor:z?"bg.inverted":void 0,color:z?"bg":void 0,children:h.jsx(gt,{lazyMount:!0,unmountOnExit:!0,content:`${q.toLocaleDateString(k,O)} - ${me.toLocaleDateString(k,O)}`,showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:h.jsx(Je,{textAlign:"right",children:q.toLocaleDateString("en-US",W)})})}),h.jsx(_e,{each:y,children:ce=>{const Q=t[ce][m],w=fn[Q],ee=w&&r.includes(w.sku),P=w&&n.includes(w.sku),G=s===(w==null?void 0:w.sku),te=w&&{_dark:w.free?"green.400":g&&n.includes(w.sku)?"teal.400":p&&r.includes(w.sku)?"blue.400":"red.400",base:w.free?"green.600":g&&n.includes(w.sku)?"teal.600":p&&r.includes(w.sku)?"blue.600":"red.600"},we=w&&{base:w.free?"green.50":g&&n.includes(w.sku)?"teal.50":p&&r.includes(w.sku)?"blue.50":"red.50",_dark:w.free?"green.800":g&&n.includes(w.sku)?"teal.800":p&&r.includes(w.sku)?"blue.800":"red.800"};return h.jsx(Ds,{dragEnabled:c,dragId:ce,width:"(100/x)%",position:"relative",onMouseEnter:()=>f&&i(w==null?void 0:w.sku),onMouseLeave:()=>f&&i(-1),bgColor:f&&G?te:we,color:f&&G?"bg":te,children:w&&h.jsxs(h.Fragment,{children:[h.jsx(Je,{textAlign:"center",lineClamp:"3",children:w.name}),u&&h.jsx(fr,{size:"xs",position:"absolute",right:1,top:1,readOnly:w.free,colorPalette:w.free?"green":ee?"blue":void 0,checked:w.free||P||ee,controlProps:{borderColor:!w.free&&!ee&&!P?"gray.400":void 0},icon:w.free?h.jsx(ve,{size:"xs",icon:hr}):ee?h.jsx(ve,{size:"xs",icon:gr}):void 0,onClick:$=>$.stopPropagation(),onCheckedChange:()=>{P?(Kt(w.sku,!1),Vt(w.sku,!0)):ee?Vt(w.sku,!1):Kt(w.sku,!0)}})]})},ce)}})]},m)}})})]})})})})]})}export{Os as default};
