import{o as H,x as I,j as e,Z as $,n as z,k as m,ae as U,u as V,F as N,P as J,R as K,T as v,J as E,H as X,af as Z,z as q,U as G,r as S,ag as Q,ah as Y}from"./index-CGgftd5G.js";import{S as ee,L as te,u as ne,C as se}from"./star-checkbox-OrNV7eWE.js";import{T as re,c as oe,d as O,j as D,h as u,e as ie,l as ae,m as ce,n as le,k as a,C as xe,I as M,P as de,a as he,b as ue,g as pe,p as ge,f as je}from"./content-checkbox-CSfzSOM_.js";import{B as R,C as me}from"./checkbox-CKH4rKtB.js";import{I as Ce,C as fe}from"./infinity-table-B_wkpl3B.js";import{V as Se,C as be}from"./content-name-badge-Bfi6jU5n.js";import{C as ke}from"./icons-mNM91w0c.js";import{F as we}from"./index-DQpwPLG-.js";import{C as ye,S as Te}from"./series-CnzaCJOd.js";function Ae({...n}){const[s,r]=H(),x=s===I.MyCars?"Cars":"Tracks";return e.jsx($,{...n,children:e.jsx(re,{size:"sm",variant:"enclosed",width:"100%",flex:1,value:x,onValueChange:d=>r(d.value==="Cars"?I.MyCars:I.MyTracks),children:e.jsxs(oe,{flex:1,width:"100%",children:[e.jsx(O,{value:"Cars",width:"100%",children:e.jsx(z,{textWrap:"nowrap",userSelect:"none",children:"Cars"})}),e.jsx(O,{value:"Tracks",width:"100%",children:e.jsx(z,{textWrap:"nowrap",userSelect:"none",children:"Tracks"})})]})})})}function ve({list:n,rows:s,filterButton:r}){return e.jsx(Ce,{list:n,rows:s,cols:7,children:e.jsxs(D,{bgColor:"bg.muted",children:[e.jsx(u,{minWidth:"40px",textAlign:"center",children:r}),e.jsx(u,{minWidth:"60px",textAlign:"center",children:e.jsx(Se,{children:"Content Logo"})}),e.jsx(u,{width:"100%",children:"Name"}),e.jsx(u,{minWidth:"90px",textAlign:"center",children:"Includes"}),e.jsx(u,{minWidth:"90px",textAlign:"center",children:"Series"}),e.jsx(u,{minWidth:"90px",textAlign:"center",children:"Category"}),e.jsx(u,{minWidth:"90px",textAlign:"center",children:"Price"})]})})}function ze({price:n,...s}){return n>0?e.jsxs(R,{colorPalette:"orange",...s,children:[e.jsx(m,{icon:U,size:"xs"}),e.jsx(we,{value:n,style:"currency",currency:"USD"})]}):e.jsx(R,{colorPalette:"green",...s,children:"Free"})}function We({content:n,id:s}){const r=n==="cars"?ye[s.toString()]:ie[s.toString()],{favoriteSeries:x}=V(),d=(r.skuSeries?r.skuSeries:r.series)||[];return e.jsx(ae,{width:"100%",maxH:"320px",children:e.jsx(ce,{size:"sm",striped:!0,children:e.jsx(le,{fontSize:"xs",children:e.jsx(N,{each:d,children:o=>{const i=Te[o.toString()];return i&&e.jsxs(D,{bgColor:"transparent",children:[e.jsx(a,{w:"20px",textAlign:"center",p:0,borderBottom:0,px:"4px",children:e.jsx(ee,{size:"xs",mt:"4px",checked:x.includes(o),onCheckedChange:({checked:p})=>J(i.id,!!p)})}),e.jsx(a,{width:"100%",display:"flex",alignItems:"center",p:0,borderBottom:0,px:"4px",fontWeight:"bold",maxW:"264px",children:e.jsx(z,{truncate:!0,children:i.name})}),e.jsx(a,{w:"20px",p:0,borderBottom:0,px:"4px",paddingInline:0,children:e.jsx(te,{letter:i.license.letter,color:i.license.color,size:"xs",children:i.license.letter})})]},o)}})})})})}function Pe({content:n,id:s,sku:r,price:x,name:d,logo:o,categories:i,free:p,skuGroup:C,series:g,skuIcon:j,owned:W,wish:b}){const k=C?Object.values(C):[];return e.jsxs(D,{bgColor:"transparent",children:[e.jsx(a,{minWidth:"40px",textAlign:"center",children:e.jsx(xe,{content:n,contentId:s,sku:r,free:p,owned:W,wish:b})}),e.jsx(a,{minWidth:"60px",textAlign:"center",children:o&&e.jsx(fe,{children:e.jsx(v,{lazyMount:!0,unmountOnExit:!0,content:e.jsx(E,{loading:"lazy",userSelect:"none",draggable:!1,h:"80px",w:"160px",fit:"contain",src:`${M.image}${o}`}),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(E,{loading:"lazy",userSelect:"none",draggable:!1,h:"24px",fit:"contain",src:`${M.image}${o}`})},o)})}),e.jsx(a,{width:"100%",children:e.jsx(be,{name:d})}),e.jsx(a,{minWidth:"90px",textAlign:"center",children:C&&e.jsx(v,{lazyMount:!0,unmountOnExit:!0,content:k.map(c=>e.jsx(z,{as:"p",children:c},c)),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsxs(R,{variant:"solid",_light:{bg:"gray.600"},children:[e.jsx(m,{icon:j,size:"sm"}),k.length]})})}),e.jsx(a,{minWidth:"90px",textAlign:"center",children:g&&e.jsxs(de,{lazyMount:!0,unmountOnExit:!0,children:[e.jsx(he,{asChild:!0,children:e.jsxs(X,{gap:1,justifyContent:"center",cursor:"pointer",children:[e.jsx(m,{icon:Z}),g.length,e.jsx(m,{icon:q})]})}),e.jsxs(ue,{p:2,children:[e.jsx(pe,{}),e.jsx(We,{id:s,content:n})]})]})}),e.jsx(a,{minWidth:"90px",textAlign:"center",children:e.jsx(N,{each:i,children:(c,P)=>e.jsx(v,{lazyMount:!0,unmountOnExit:!0,content:G[c],showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(ke,{fontSize:"16px",ml:P>0?"6px":void 0,category:c})},`${c}`)})}),e.jsx(a,{minWidth:"90px",textAlign:"center",children:e.jsx(ze,{price:x})})]})}const Fe=K.memo(Pe);function _e({allTab:n,content:s,contentListJson:r,description:x,freeCount:d,myContent:o,skuIcon:i,tabs:p,title:C,wish:g}){const[j,W]=S.useState(n),[b,k]=S.useState(""),[c,P]=S.useState(r),[l,w]=S.useState(0),F=l===3,y=l===2,T=l===1,B=ne(b,500);return S.useEffect(()=>{const t=j===n?r:r.filter(h=>h.categories.some(_=>p[_]===j)),f=l!==0?t.filter(h=>{if(l===1)return h.free;if(l===2)return g.includes(h.sku);if(l===3)return o.includes(h.sku)}):t,A=B.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),L=A?f.filter(h=>h.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(A)):f;P(L)},[B,j,l]),e.jsxs(ge,{children:[e.jsx(je,{freeCount:d,ownedCount:o.length??0,wishCount:g.length??0,title:C,description:x,children:e.jsx(Ae,{hideFrom:"md"})}),e.jsx(se,{tabs:p,tab:j,onTabChange:W,search:b,onSearchChange:k}),e.jsx(ve,{filterButton:e.jsx(v,{lazyMount:!0,unmountOnExit:!0,content:"Filter content by checkbox state",showArrow:!0,openDelay:200,closeDelay:100,ids:{trigger:"checkFilter"},children:e.jsx(me,{ids:{root:"checkFilter"},checked:T||F||y,controlProps:{bgColor:T||F||y?{_hover:"fg",base:"gray.400"}:void 0,borderColor:{_hover:"fg",base:"gray.400"}},icon:T?e.jsx(m,{size:"xs",icon:Q}):y?e.jsx(m,{size:"xs",icon:Y}):void 0,onClick:t=>t.stopPropagation(),onCheckedChange:()=>{w(F?2:y?1:T?0:3)}})}),list:c,rows:t=>{const f=o.includes(t.sku),A=!f&&g.includes(t.sku);return e.jsx(Fe,{id:t.id,sku:t.sku,content:s,skuIcon:i,price:t.price,name:t.name,logo:t.logo,categories:t.categories,free:t.free,skuGroup:t.skuGroup,series:t.skuSeries?t.skuSeries:t.series,owned:f,wish:A},t.id)}})]})}export{_e as C};
