import{v as N,z as A,j as e,S as L,T as k,q as H,m as D,n as u,aa as _,F as O,ab as $,V as U,R as V,D as q,G,a as v,A as R,ac as J,C as K,O as X,r as y,w as Q}from"./index-BjDCwdPj.js";import{P as Y,S as Z,L as ee,C as ne,u as se,a as te}from"./star-checkbox-scEdvR-6.js";import{T as re,c as ae,d as F,k as P,g as h,B as z,C as oe,e as ie,u as ce,h as le,i as xe,m as de,S as he,f as c,p as ue,I as B,P as pe,a as ge,b as je,l as me,q as Ce,r as fe,s as Se,n as be}from"./tracks-CMEQG_zc.js";import{C as we}from"./checkbox-counts-DUoELf7X.js";import{P as ye}from"./page-header-oFxzNBt7.js";import{V as W,C as ke}from"./content-name-badge-CcxkRSLf.js";import{a as Te,C as Ae}from"./index-DpQBr8-8.js";import{F as ve,B as We}from"./button-BEKFfpKL.js";function ze({...s}){const[r,t]=N(),x=r===A.MyCars?"Cars":"Tracks";return e.jsx(L,{...s,children:e.jsx(re,{size:"sm",variant:"enclosed",width:"100%",flex:1,value:x,onValueChange:d=>t(d.value==="Cars"?A.MyCars:A.MyTracks),children:e.jsxs(ae,{flex:1,width:"100%",children:[e.jsx(F,{value:"Cars",width:"100%",children:e.jsx(k,{textWrap:"nowrap",userSelect:"none",children:"Cars"})}),e.jsx(F,{value:"Tracks",width:"100%",children:e.jsx(k,{textWrap:"nowrap",userSelect:"none",children:"Tracks"})})]})})})}function Pe({title:s,description:r,freeCount:t,ownedCount:x,wishCount:d}){const{height:o}=H(),a=i=>o<=680?void 0:i;return e.jsxs(D,{padding:{base:"unset",md:a(4)},justifyContent:"space-between",alignItems:"start",children:[e.jsx(ye,{title:s,description:r}),e.jsx(we,{freeCount:t,ownedCount:x,wishCount:d})]})}function Ie({list:s,rows:r}){return e.jsx(Y,{list:s,rows:r,children:e.jsxs(P,{bgColor:"bg.muted",children:[e.jsx(h,{minWidth:"40px",textAlign:"center",children:e.jsx(W,{children:"Owned content"})}),e.jsx(h,{minWidth:"60px",textAlign:"center",children:e.jsx(W,{children:"Content Logo"})}),e.jsx(h,{width:"100%",children:"Name"}),e.jsx(h,{minWidth:"90px",textAlign:"center",children:"Includes"}),e.jsx(h,{minWidth:"90px",textAlign:"center",children:"Series"}),e.jsx(h,{minWidth:"90px",textAlign:"center",children:"Category"}),e.jsx(h,{minWidth:"90px",textAlign:"center",children:"Price"}),e.jsx(h,{minWidth:"90px",children:e.jsx(W,{children:"Info on iracing.com"})})]})})}function Re({price:s,...r}){return s>0?e.jsxs(z,{colorPalette:"orange",...r,children:[e.jsx(u,{icon:_,size:"xs"}),e.jsx(ve,{value:s,style:"currency",currency:"USD"})]}):e.jsx(z,{colorPalette:"green",...r,children:"Free"})}function Fe({content:s,id:r}){const t=s==="cars"?oe[r.toString()]:ie[r.toString()],{favoriteSeries:x}=ce(),d=(t.skuSeries?t.skuSeries:t.series)||[];return e.jsx(le,{width:"100%",maxH:"320px",children:e.jsx(xe,{size:"sm",striped:!0,children:e.jsx(de,{fontSize:"xs",children:e.jsx(O,{each:d,children:o=>{const a=he[o.toString()];return a&&e.jsxs(P,{bgColor:"transparent",children:[e.jsx(c,{w:"20px",textAlign:"center",p:0,borderBottom:0,px:"4px",children:e.jsx(Z,{size:"xs",mt:"4px",checked:x.includes(o),onCheckedChange:({checked:i})=>ue(a.id,!!i)})}),e.jsx(c,{width:"100%",display:"flex",alignItems:"center",p:0,borderBottom:0,px:"4px",fontWeight:"bold",maxW:"264px",children:e.jsx(k,{truncate:!0,children:a.name})}),e.jsx(c,{w:"20px",p:0,borderBottom:0,px:"4px",paddingInline:0,children:e.jsx(ee,{letter:a.license.letter,color:a.license.color,size:"xs",children:a.license.letter})})]},o)}})})})})}function Be({href:s}){return e.jsxs(We,{colorPalette:"blue",size:"xs",p:"0 8px",height:"24px",as:"a",href:s,target:"_blank",rel:"noreferrer",children:[e.jsx(u,{icon:$}),e.jsxs("span",{children:["Info",e.jsx(u,{icon:U,size:"xs"})]})]})}function De({content:s,id:r,sku:t,price:x,name:d,logo:o,categories:a,free:i,skuGroup:g,series:C,skuIcon:f,infoUrl:j,owned:m,wish:p}){const[S,b]=s==="cars"?[Ce,fe]:[Se,be];return e.jsxs(P,{bgColor:"transparent",children:[e.jsx(c,{minWidth:"40px",textAlign:"center",children:e.jsx(q,{readOnly:i,colorPalette:i?"green":p?"blue":void 0,checked:i||m||p,controlProps:{borderColor:!i&&!p&&!m?"gray.400":void 0},icon:i?e.jsx(u,{size:"xs",icon:G}):p?e.jsx(u,{size:"xs",icon:Te}):void 0,onClick:l=>l.stopPropagation(),onCheckedChange:()=>{m?(S(t,!1),b(t,!0)):p?b(t,!1):S(t,!0)}})}),e.jsx(c,{minWidth:"60px",textAlign:"center",children:o&&e.jsx(ne,{children:e.jsx(v,{lazyMount:!0,unmountOnExit:!0,content:e.jsx(R,{loading:"lazy",userSelect:"none",draggable:!1,h:"80px",w:"160px",fit:"contain",src:`${B.image}${o}`}),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(R,{loading:"lazy",userSelect:"none",draggable:!1,h:"24px",fit:"contain",src:`${B.image}${o}`})},o)})}),e.jsx(c,{width:"100%",children:e.jsx(ke,{name:d})}),e.jsx(c,{minWidth:"90px",textAlign:"center",children:g&&e.jsx(v,{lazyMount:!0,unmountOnExit:!0,content:g.map(l=>e.jsx(k,{as:"p",children:l},l)),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsxs(z,{variant:"solid",_light:{bg:"gray.600"},children:[e.jsx(u,{icon:f,size:"sm"}),g.length]})})}),e.jsx(c,{minWidth:"90px",textAlign:"center",children:C&&e.jsxs(pe,{lazyMount:!0,unmountOnExit:!0,children:[e.jsx(ge,{asChild:!0,children:e.jsxs(D,{gap:1,justifyContent:"center",cursor:"pointer",children:[e.jsx(u,{icon:J}),C.length,e.jsx(u,{icon:K})]})}),e.jsxs(je,{p:2,children:[e.jsx(me,{}),e.jsx(Fe,{id:r,content:s})]})]})}),e.jsx(c,{minWidth:"90px",textAlign:"center",children:e.jsx(O,{each:a,children:(l,w)=>e.jsx(v,{lazyMount:!0,unmountOnExit:!0,content:X[l],showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(Ae,{fontSize:"16px",ml:w>0?"6px":void 0,category:l})},`${l}`)})}),e.jsx(c,{minWidth:"90px",textAlign:"center",children:e.jsx(Re,{price:x})}),e.jsx(c,{minWidth:"90px",textAlign:"end",children:e.jsx(Be,{href:j})})]})}const Oe=V.memo(De);function Ve({allTab:s,content:r,contentListJson:t,description:x,freeCount:d,infoUrl:o,myContent:a,skuIcon:i,tabs:g,title:C,wish:f}){const[j,m]=y.useState(s),[p,S]=y.useState(""),[b,l]=y.useState(t),w=se(p,500);return y.useEffect(()=>{const n=j===s?t:t.filter(T=>T.categories.some(M=>g[M]===j)),I=w.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),E=I?n.filter(T=>T.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(I)):n;l(E)},[w,j]),e.jsxs(Q,{direction:"column",height:"100%",width:"100%",gap:"8px",children:[e.jsx(Pe,{freeCount:d,ownedCount:a.length??0,wishCount:f.length??0,title:C,description:x}),e.jsx(ze,{hideFrom:"md"}),e.jsx(te,{tabs:g,tab:j,onTabChange:m,onSearchChange:S}),e.jsx(Ie,{list:b,rows:n=>e.jsx(Oe,{id:n.id,sku:n.sku,content:r,infoUrl:o(n.id),skuIcon:i,price:n.price,name:n.name,logo:n.logo,categories:n.categories,free:n.free,skuGroup:n.skuGroup?Object.values(n.skuGroup):void 0,series:n.skuSeries?n.skuSeries:n.series,owned:a.includes(n.sku),wish:f.includes(n.sku)},n.id)})]})}export{Ve as C};
