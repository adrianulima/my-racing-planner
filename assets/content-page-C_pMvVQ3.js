import{q as M,x as T,j as e,S as L,T as S,p as H,l as D,D as z,m as j,a9 as _,F as B,N as $,aa as U,O as V,R as q,a as k,C as I,ab as G,z as J,M as K,r as f,t as Q}from"./index-x8IrEc5F.js";import{P as X,S as Y,L as Z,C as ee,u as ne,a as te}from"./star-checkbox-CSiXoEl5.js";import{T as se,c as re,d as R,i as W,g as d,C as ie,e as ae,u as oe,l as le,m as ce,n as xe,S as de,j as o,o as he,k as ue,I as F,P as pe,a as je,b as ge,f as me}from"./content-checkbox-BUgB6oAL.js";import{C as Ce}from"./checkbox-counts-BHZQatzv.js";import{P as fe}from"./page-header-BBzbh8l0.js";import{V as A,C as Se}from"./content-name-badge-DSsam6OG.js";import{C as be}from"./index-q-8fKQJ2.js";import{F as we}from"./index-B10oFVEB.js";function ye({...t}){const[s,r]=M(),l=s===T.MyCars?"Cars":"Tracks";return e.jsx(L,{...t,children:e.jsx(se,{size:"sm",variant:"enclosed",width:"100%",flex:1,value:l,onValueChange:c=>r(c.value==="Cars"?T.MyCars:T.MyTracks),children:e.jsxs(re,{flex:1,width:"100%",children:[e.jsx(R,{value:"Cars",width:"100%",children:e.jsx(S,{textWrap:"nowrap",userSelect:"none",children:"Cars"})}),e.jsx(R,{value:"Tracks",width:"100%",children:e.jsx(S,{textWrap:"nowrap",userSelect:"none",children:"Tracks"})})]})})})}function Te({title:t,description:s,freeCount:r,ownedCount:l,wishCount:c}){const{height:a}=H(),i=h=>a<=680?void 0:h;return e.jsxs(D,{padding:{base:"unset",md:i(4)},justifyContent:"space-between",alignItems:"start",children:[e.jsx(fe,{title:t,description:s}),e.jsx(Ce,{freeCount:r,ownedCount:l,wishCount:c})]})}function ke({list:t,rows:s}){return e.jsx(X,{list:t,rows:s,children:e.jsxs(W,{bgColor:"bg.muted",children:[e.jsx(d,{minWidth:"40px",textAlign:"center",children:e.jsx(A,{children:"Owned content"})}),e.jsx(d,{minWidth:"60px",textAlign:"center",children:e.jsx(A,{children:"Content Logo"})}),e.jsx(d,{width:"100%",children:"Name"}),e.jsx(d,{minWidth:"90px",textAlign:"center",children:"Includes"}),e.jsx(d,{minWidth:"90px",textAlign:"center",children:"Series"}),e.jsx(d,{minWidth:"90px",textAlign:"center",children:"Category"}),e.jsx(d,{minWidth:"90px",textAlign:"center",children:"Price"}),e.jsx(d,{minWidth:"90px",children:e.jsx(A,{children:"Info on iracing.com"})})]})})}function Ae({price:t,...s}){return t>0?e.jsxs(z,{colorPalette:"orange",...s,children:[e.jsx(j,{icon:_,size:"xs"}),e.jsx(we,{value:t,style:"currency",currency:"USD"})]}):e.jsx(z,{colorPalette:"green",...s,children:"Free"})}function ze({content:t,id:s}){const r=t==="cars"?ie[s.toString()]:ae[s.toString()],{favoriteSeries:l}=oe(),c=(r.skuSeries?r.skuSeries:r.series)||[];return e.jsx(le,{width:"100%",maxH:"320px",children:e.jsx(ce,{size:"sm",striped:!0,children:e.jsx(xe,{fontSize:"xs",children:e.jsx(B,{each:c,children:a=>{const i=de[a.toString()];return i&&e.jsxs(W,{bgColor:"transparent",children:[e.jsx(o,{w:"20px",textAlign:"center",p:0,borderBottom:0,px:"4px",children:e.jsx(Y,{size:"xs",mt:"4px",checked:l.includes(a),onCheckedChange:({checked:h})=>he(i.id,!!h)})}),e.jsx(o,{width:"100%",display:"flex",alignItems:"center",p:0,borderBottom:0,px:"4px",fontWeight:"bold",maxW:"264px",children:e.jsx(S,{truncate:!0,children:i.name})}),e.jsx(o,{w:"20px",p:0,borderBottom:0,px:"4px",paddingInline:0,children:e.jsx(Z,{letter:i.license.letter,color:i.license.color,size:"xs",children:i.license.letter})})]},a)}})})})})}function We({href:t}){return e.jsxs($,{colorPalette:"blue",size:"xs",p:"0 8px",height:"24px",as:"a",href:t,target:"_blank",rel:"noreferrer",children:[e.jsx(j,{icon:U}),e.jsxs("span",{children:["Info",e.jsx(j,{icon:V,size:"xs"})]})]})}function ve({content:t,id:s,sku:r,price:l,name:c,logo:a,categories:i,free:h,skuGroup:u,series:g,skuIcon:m,infoUrl:p,owned:b,wish:C}){return e.jsxs(W,{bgColor:"transparent",children:[e.jsx(o,{minWidth:"40px",textAlign:"center",children:e.jsx(ue,{content:t,sku:r,free:h,owned:b,wish:C})}),e.jsx(o,{minWidth:"60px",textAlign:"center",children:a&&e.jsx(ee,{children:e.jsx(k,{lazyMount:!0,unmountOnExit:!0,content:e.jsx(I,{loading:"lazy",userSelect:"none",draggable:!1,h:"80px",w:"160px",fit:"contain",src:`${F.image}${a}`}),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(I,{loading:"lazy",userSelect:"none",draggable:!1,h:"24px",fit:"contain",src:`${F.image}${a}`})},a)})}),e.jsx(o,{width:"100%",children:e.jsx(Se,{name:c})}),e.jsx(o,{minWidth:"90px",textAlign:"center",children:u&&e.jsx(k,{lazyMount:!0,unmountOnExit:!0,content:u.map(x=>e.jsx(S,{as:"p",children:x},x)),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsxs(z,{variant:"solid",_light:{bg:"gray.600"},children:[e.jsx(j,{icon:m,size:"sm"}),u.length]})})}),e.jsx(o,{minWidth:"90px",textAlign:"center",children:g&&e.jsxs(pe,{lazyMount:!0,unmountOnExit:!0,children:[e.jsx(je,{asChild:!0,children:e.jsxs(D,{gap:1,justifyContent:"center",cursor:"pointer",children:[e.jsx(j,{icon:G}),g.length,e.jsx(j,{icon:J})]})}),e.jsxs(ge,{p:2,children:[e.jsx(me,{}),e.jsx(ze,{id:s,content:t})]})]})}),e.jsx(o,{minWidth:"90px",textAlign:"center",children:e.jsx(B,{each:i,children:(x,w)=>e.jsx(k,{lazyMount:!0,unmountOnExit:!0,content:K[x],showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(be,{fontSize:"16px",ml:w>0?"6px":void 0,category:x})},`${x}`)})}),e.jsx(o,{minWidth:"90px",textAlign:"center",children:e.jsx(Ae,{price:l})}),e.jsx(o,{minWidth:"90px",textAlign:"end",children:e.jsx(We,{href:p})})]})}const Pe=q.memo(ve);function Me({allTab:t,content:s,contentListJson:r,description:l,freeCount:c,infoUrl:a,myContent:i,skuIcon:h,tabs:u,title:g,wish:m}){const[p,b]=f.useState(t),[C,x]=f.useState(""),[w,E]=f.useState(r),v=ne(C,500);return f.useEffect(()=>{const n=p===t?r:r.filter(y=>y.categories.some(N=>u[N]===p)),P=v.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),O=P?n.filter(y=>y.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(P)):n;E(O)},[v,p]),e.jsxs(Q,{direction:"column",height:"100%",width:"100%",gap:"8px",children:[e.jsx(Te,{freeCount:c,ownedCount:i.length??0,wishCount:m.length??0,title:g,description:l}),e.jsx(ye,{hideFrom:"md"}),e.jsx(te,{tabs:u,tab:p,onTabChange:b,search:C,onSearchChange:x}),e.jsx(ke,{list:w,rows:n=>e.jsx(Pe,{id:n.id,sku:n.sku,content:s,infoUrl:a(n.id),skuIcon:h,price:n.price,name:n.name,logo:n.logo,categories:n.categories,free:n.free,skuGroup:n.skuGroup?Object.values(n.skuGroup):void 0,series:n.skuSeries?n.skuSeries:n.series,owned:i.includes(n.sku),wish:m.includes(n.sku)},n.id)})]})}export{Me as C};
