import{S as O,j as e,n as c,W as M,R as B,r as l,a as N,X as H,T as u,P as k,Y as _,H as D,f as $,C as W,Z as U,_ as V,K as J,E as y,u as K}from"./index-CZYf1Hav.js";import{S as R,u as X,C as Y}from"./star-checkbox-uhZ0AZ6d.js";import{j as I,h as s,k as i,I as v,P as E,a as z,b as F,g as P,p as Z,f as q}from"./content-checkbox-BKajIatf.js";import{I as G,C as Q}from"./infinity-table-BcBDRxl-.js";import{V as ee,C as te}from"./content-name-badge-Dqh5wSxG.js";import{C as ne}from"./icons-CsvFwVhy.js";import{c as re,g as se,C as T}from"./getScheduleDescription-CVVGhRkQ.js";import{f as ie}from"./index-DBUjmnWf.js";import{B as b}from"./checkbox--BPjHIN2.js";import{L as oe}from"./license-badge-BbUhRkl6.js";import"./cars-KOiS3fc8.js";const A=Object.values(O).sort((r,n)=>r.license.id-n.license.id||r.name.localeCompare(n.name));function ae({list:r,rows:n,filterButton:o}){return e.jsx(G,{list:r,rows:n,cols:9,children:e.jsxs(I,{bgColor:"bg.muted",children:[e.jsx(s,{minWidth:"40px",textAlign:"center",children:o}),e.jsx(s,{minWidth:"60px",textAlign:"center",children:e.jsx(ee,{children:"Series Logo"})}),e.jsx(s,{width:"100%",children:"Name"}),e.jsx(s,{minWidth:"90px",textAlign:"center",children:"Setup"}),e.jsx(s,{minWidth:"90px",textAlign:"center",children:"Cars"}),e.jsx(s,{minWidth:"90px",textAlign:"center",children:"Tracks"}),e.jsx(s,{minWidth:"90px",textAlign:"center",children:"Category"}),e.jsx(s,{minWidth:"90px",textAlign:"center",children:"Duration"}),e.jsx(s,{minWidth:"90px",textAlign:"center",children:"License"})]})})}function ce({duration:r,laps:n}){const o=re(n,r);return e.jsxs(b,{colorPalette:n?"pink":"purple",children:[e.jsx(c,{icon:n?M:ie,size:"xs"}),o]})}function le({id:r,logo:n,name:o,cars:p,weeks:S,favorite:w,fixed:x,category:g,license:d,color:j,duration:t,laps:m,official:f}){const C=l.useMemo(()=>[...new Set(S.map(h=>h.track.id))],[]),{seasonUseLocalTimezone:a}=N(),L=se(r,a);return e.jsxs(I,{bgColor:"transparent",children:[e.jsx(i,{minWidth:"40px",textAlign:"center",children:e.jsx(R,{onClick:h=>h.stopPropagation(),checked:w,onCheckedChange:h=>H(r,!!h.checked)})}),e.jsx(i,{minWidth:"60px",textAlign:"center",children:n&&e.jsx(Q,{children:e.jsx(u,{lazyMount:!0,unmountOnExit:!0,content:e.jsx(k,{loading:"lazy",userSelect:"none",draggable:!1,h:"80px",w:"160px",fit:"contain",src:`${v.image}/img/logos/series/${n}`}),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(k,{loading:"lazy",userSelect:"none",draggable:!1,h:"24px",fit:"contain",src:`${v.image}/img/logos/series/${n}`})},n)})}),e.jsx(i,{width:"100%",children:e.jsx(te,{name:o,children:!f&&e.jsx(b,{colorPalette:"yellow",mr:1,children:"Unranked"})})}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:x&&e.jsx(u,{lazyMount:!0,unmountOnExit:!0,content:"Fixed Setup",showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsxs(b,{variant:"solid",_light:{bg:"gray.600"},children:[e.jsx(c,{icon:_,size:"sm"}),"Fixed"]})})}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:e.jsxs(E,{lazyMount:!0,unmountOnExit:!0,children:[e.jsx(z,{asChild:!0,children:e.jsxs(D,{gap:1,justifyContent:"center",cursor:"pointer",children:[e.jsx(c,{icon:$}),p.length,e.jsx(c,{icon:W})]})}),e.jsxs(F,{p:2,children:[e.jsx(P,{}),e.jsx(T,{content:"cars",list:p})]})]})}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:e.jsxs(E,{lazyMount:!0,unmountOnExit:!0,children:[e.jsx(z,{asChild:!0,children:e.jsxs(D,{gap:1,justifyContent:"center",cursor:"pointer",children:[e.jsx(c,{icon:U}),C.length,e.jsx(c,{icon:W})]})}),e.jsxs(F,{p:2,children:[e.jsx(P,{}),e.jsx(T,{content:"tracks",list:C})]})]})}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:e.jsx(u,{lazyMount:!0,unmountOnExit:!0,content:V[g],showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(ne,{fontSize:"16px",category:g})})}),e.jsx(i,{minWidth:"130px",textAlign:"center",children:e.jsx(u,{lazyMount:!0,unmountOnExit:!0,content:L,showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(J,{children:e.jsx(ce,{duration:t,laps:m})})})}),e.jsx(i,{minWidth:"40px",textAlign:"center",children:e.jsx(oe,{letter:d,color:j,children:d})})]})}const xe=B.memo(le);function we(){const[r,n]=l.useState(y.all),[o,p]=l.useState(""),[S,w]=l.useState(A),[x,g]=l.useState(!1),d=X(o,500),{favoriteSeries:j}=K();return l.useEffect(()=>{const t=r===y.all?A:A.filter(a=>y[a.category]===r),m=x?t.filter(a=>j.includes(a.id)):t,f=d.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),C=f?m.filter(a=>a.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(f)):m;w(C)},[d,r,x]),e.jsxs(Z,{children:[e.jsx(q,{title:"My Favorite Series",description:"Select the series you wanna see in your season planner"}),e.jsx(Y,{tabs:y,tab:r,onTabChange:n,search:o,onSearchChange:p}),e.jsx(ae,{filterButton:e.jsx(u,{lazyMount:!0,unmountOnExit:!0,content:"Filter favorite series only",showArrow:!0,openDelay:200,closeDelay:100,ids:{trigger:"favFilter"},children:e.jsx(R,{ids:{root:"favFilter"},gray:!0,onClick:t=>t.stopPropagation(),checked:x,onCheckedChange:t=>g(!!t.checked)})}),list:S,rows:t=>e.jsx(xe,{id:t.id,name:t.name,logo:t.logo,category:t.category,favorite:j.includes(t.id),fixed:t.fixed,cars:t.cars,weeks:t.weeks,license:t.license.letter,color:t.license.color,duration:t.duration,laps:t.laps,official:t.official},t.id)})]})}export{we as default};
