import{o as U,x as R,j as e,X as V,n as v,k as d,ad as q,u as X,F as L,N as J,V as K,ae as Q,W as G,R as Y,T as W,D as O,H as Z,af as ee,z as ne,Q as te,r as b,ag as se,ah as re}from"./index-BvVQSPO0.js";import{I as oe,S as ie,L as ae,C as ce,u as le,a as xe}from"./star-checkbox-SDEw4YSj.js";import{T as de,c as he,d as N,j as B,h as x,C as ue,e as pe,m as ge,n as je,p as fe,S as me,k as i,l as Ce,I as M,P as be,a as Se,b as ke,g as we,q as ye,f as Te}from"./content-checkbox-n0-5Dy-C.js";import{B as D,C as Ae}from"./checkbox-jwR6ioW-.js";import{V as _,C as ze}from"./content-name-badge-fBs6TsSS.js";import{C as We}from"./icons-CVB1yVXx.js";import{F as ve}from"./index-DYUgryx-.js";function Ie({...t}){const[s,r]=U(),h=s===R.MyCars?"Cars":"Tracks";return e.jsx(V,{...t,children:e.jsx(de,{size:"sm",variant:"enclosed",width:"100%",flex:1,value:h,onValueChange:u=>r(u.value==="Cars"?R.MyCars:R.MyTracks),children:e.jsxs(he,{flex:1,width:"100%",children:[e.jsx(N,{value:"Cars",width:"100%",children:e.jsx(v,{textWrap:"nowrap",userSelect:"none",children:"Cars"})}),e.jsx(N,{value:"Tracks",width:"100%",children:e.jsx(v,{textWrap:"nowrap",userSelect:"none",children:"Tracks"})})]})})})}function Pe({list:t,rows:s,filterButton:r}){return e.jsx(oe,{list:t,rows:s,cols:8,children:e.jsxs(B,{bgColor:"bg.muted",children:[e.jsx(x,{minWidth:"40px",textAlign:"center",children:r}),e.jsx(x,{minWidth:"60px",textAlign:"center",children:e.jsx(_,{children:"Content Logo"})}),e.jsx(x,{width:"100%",children:"Name"}),e.jsx(x,{minWidth:"90px",textAlign:"center",children:"Includes"}),e.jsx(x,{minWidth:"90px",textAlign:"center",children:"Series"}),e.jsx(x,{minWidth:"90px",textAlign:"center",children:"Category"}),e.jsx(x,{minWidth:"90px",textAlign:"center",children:"Price"}),e.jsx(x,{minWidth:"90px",children:e.jsx(_,{children:"Info on iracing.com"})})]})})}function Fe({price:t,...s}){return t>0?e.jsxs(D,{colorPalette:"orange",...s,children:[e.jsx(d,{icon:q,size:"xs"}),e.jsx(ve,{value:t,style:"currency",currency:"USD"})]}):e.jsx(D,{colorPalette:"green",...s,children:"Free"})}function Re({content:t,id:s}){const r=t==="cars"?ue[s.toString()]:pe[s.toString()],{favoriteSeries:h}=X(),u=(r.skuSeries?r.skuSeries:r.series)||[];return e.jsx(ge,{width:"100%",maxH:"320px",children:e.jsx(je,{size:"sm",striped:!0,children:e.jsx(fe,{fontSize:"xs",children:e.jsx(L,{each:u,children:a=>{const o=me[a.toString()];return o&&e.jsxs(B,{bgColor:"transparent",children:[e.jsx(i,{w:"20px",textAlign:"center",p:0,borderBottom:0,px:"4px",children:e.jsx(ie,{size:"xs",mt:"4px",checked:h.includes(a),onCheckedChange:({checked:f})=>J(o.id,!!f)})}),e.jsx(i,{width:"100%",display:"flex",alignItems:"center",p:0,borderBottom:0,px:"4px",fontWeight:"bold",maxW:"264px",children:e.jsx(v,{truncate:!0,children:o.name})}),e.jsx(i,{w:"20px",p:0,borderBottom:0,px:"4px",paddingInline:0,children:e.jsx(ae,{letter:o.license.letter,color:o.license.color,size:"xs",children:o.license.letter})})]},a)}})})})})}function De({href:t}){return e.jsxs(K,{colorPalette:"blue",size:"xs",p:"0 8px",height:"24px",as:"a",href:t,target:"_blank",rel:"noreferrer",children:[e.jsx(d,{icon:Q}),e.jsxs("span",{children:["Info",e.jsx(d,{icon:G,size:"xs"})]})]})}function Be({content:t,id:s,sku:r,price:h,name:u,logo:a,categories:o,free:f,skuGroup:g,series:S,skuIcon:m,infoUrl:j,owned:I,wish:k}){const w=g?Object.values(g):[];return e.jsxs(B,{bgColor:"transparent",children:[e.jsx(i,{minWidth:"40px",textAlign:"center",children:e.jsx(Ce,{content:t,contentId:s,sku:r,free:f,owned:I,wish:k})}),e.jsx(i,{minWidth:"60px",textAlign:"center",children:a&&e.jsx(ce,{children:e.jsx(W,{lazyMount:!0,unmountOnExit:!0,content:e.jsx(O,{loading:"lazy",userSelect:"none",draggable:!1,h:"80px",w:"160px",fit:"contain",src:`${M.image}${a}`}),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(O,{loading:"lazy",userSelect:"none",draggable:!1,h:"24px",fit:"contain",src:`${M.image}${a}`})},a)})}),e.jsx(i,{width:"100%",children:e.jsx(ze,{name:u})}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:g&&e.jsx(W,{lazyMount:!0,unmountOnExit:!0,content:w.map(c=>e.jsx(v,{as:"p",children:c},c)),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsxs(D,{variant:"solid",_light:{bg:"gray.600"},children:[e.jsx(d,{icon:m,size:"sm"}),w.length]})})}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:S&&e.jsxs(be,{lazyMount:!0,unmountOnExit:!0,children:[e.jsx(Se,{asChild:!0,children:e.jsxs(Z,{gap:1,justifyContent:"center",cursor:"pointer",children:[e.jsx(d,{icon:ee}),S.length,e.jsx(d,{icon:ne})]})}),e.jsxs(ke,{p:2,children:[e.jsx(we,{}),e.jsx(Re,{id:s,content:t})]})]})}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:e.jsx(L,{each:o,children:(c,P)=>e.jsx(W,{lazyMount:!0,unmountOnExit:!0,content:te[c],showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(We,{fontSize:"16px",ml:P>0?"6px":void 0,category:c})},`${c}`)})}),e.jsx(i,{minWidth:"90px",textAlign:"center",children:e.jsx(Fe,{price:h})}),e.jsx(i,{minWidth:"90px",textAlign:"end",children:e.jsx(De,{href:j})})]})}const Ee=Y.memo(Be);function Ue({allTab:t,content:s,contentListJson:r,description:h,freeCount:u,infoUrl:a,myContent:o,skuIcon:f,tabs:g,title:S,wish:m}){const[j,I]=b.useState(t),[k,w]=b.useState(""),[c,P]=b.useState(r),[l,y]=b.useState(0),F=l===3,T=l===2,A=l===1,E=le(k,500);return b.useEffect(()=>{const n=j===t?r:r.filter(p=>p.categories.some($=>g[$]===j)),C=l!==0?n.filter(p=>{if(l===1)return p.free;if(l===2)return m.includes(p.sku);if(l===3)return o.includes(p.sku)}):n,z=E.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),H=z?C.filter(p=>p.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(z)):C;P(H)},[E,j,l]),e.jsxs(ye,{children:[e.jsx(Te,{freeCount:u,ownedCount:o.length??0,wishCount:m.length??0,title:S,description:h,children:e.jsx(Ie,{hideFrom:"md"})}),e.jsx(xe,{tabs:g,tab:j,onTabChange:I,search:k,onSearchChange:w}),e.jsx(Pe,{filterButton:e.jsx(W,{lazyMount:!0,unmountOnExit:!0,content:"Filter content by checkbox state",showArrow:!0,openDelay:200,closeDelay:100,ids:{trigger:"checkFilter"},children:e.jsx(Ae,{ids:{root:"checkFilter"},colorPalette:"gray",checked:A||F||T,controlProps:{bgColor:A||F||T?{_hover:"black",base:"gray.400"}:void 0,borderColor:{_hover:"black",base:"gray.400"}},icon:A?e.jsx(d,{size:"xs",icon:se}):T?e.jsx(d,{size:"xs",icon:re}):void 0,onClick:n=>n.stopPropagation(),onCheckedChange:()=>{y(F?2:T?1:A?0:3)}})}),list:c,rows:n=>{const C=o.includes(n.sku),z=!C&&m.includes(n.sku);return e.jsx(Ee,{id:n.id,sku:n.sku,content:s,infoUrl:a(n.id),skuIcon:f,price:n.price,name:n.name,logo:n.logo,categories:n.categories,free:n.free,skuGroup:n.skuGroup,series:n.skuSeries?n.skuSeries:n.series,owned:C,wish:z},n.id)}})]})}export{Ue as C};
