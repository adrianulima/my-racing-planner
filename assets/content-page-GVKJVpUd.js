import{u as N,g as A,j as e,S as H,s as L,T as y,h as _,i as D,k as h,l as $,F as E,m as U,n as V,R as q,C as G,o as J,a as P,I as R,p as K,q as X,r as Q,t as w,v as Y}from"./index-l4xYVy1r.js";import{P as Z,S as ee,L as se,C as ne,u as te,a as re}from"./star-checkbox-Rh47qyAh.js";import{T as ae,a as ie,b as F,c as z,d,B as v,C as oe,e as ce,u as le,f as xe,g as de,h as he,S as ue,i as c,s as pe,I as B,P as ge,j as je,k as me,l as Ce,m as fe,n as Se,o as be,p as ke}from"./tracks-DOssp19y.js";import{C as we}from"./checkbox-counts-CkQGGlA4.js";import{P as ye}from"./page-header-BuewkjOv.js";import{V as W,C as Te}from"./content-name-badge-taVLh1Vf.js";import{f as Ae,C as Pe}from"./index-CouEe44i.js";import{F as We,B as ve}from"./button-B39TVzNq.js";function ze({...n}){const{selectedPage:r}=N(),t=r===A.MyCars?"Cars":"Tracks";return e.jsx(H,{...n,children:e.jsx(ae,{size:"sm",variant:"enclosed",width:"100%",flex:1,value:t,onValueChange:x=>L(x.value==="Cars"?A.MyCars:A.MyTracks),children:e.jsxs(ie,{flex:1,width:"100%",children:[e.jsx(F,{value:"Cars",width:"100%",children:e.jsx(y,{textWrap:"nowrap",userSelect:"none",children:"Cars"})}),e.jsx(F,{value:"Tracks",width:"100%",children:e.jsx(y,{textWrap:"nowrap",userSelect:"none",children:"Tracks"})})]})})})}function Ie({title:n,description:r,freeCount:t,ownedCount:x,wishCount:u}){const{height:i}=_(),a=o=>i<=680?void 0:o;return e.jsxs(D,{padding:{base:"unset",md:a(4)},justifyContent:"space-between",alignItems:"start",children:[e.jsx(ye,{title:n,description:r}),e.jsx(we,{freeCount:t,ownedCount:x,wishCount:u})]})}function Re({list:n,rows:r}){return e.jsx(Z,{list:n,rows:r,children:e.jsxs(z,{bgColor:"bg.muted",children:[e.jsx(d,{minWidth:"40px",textAlign:"center",children:e.jsx(W,{children:"Owned content"})}),e.jsx(d,{minWidth:"60px",textAlign:"center",children:e.jsx(W,{children:"Content Logo"})}),e.jsx(d,{width:"100%",children:"Name"}),e.jsx(d,{minWidth:"90px",textAlign:"center",children:"Includes"}),e.jsx(d,{minWidth:"90px",textAlign:"center",children:"Series"}),e.jsx(d,{minWidth:"90px",textAlign:"center",children:"Category"}),e.jsx(d,{minWidth:"90px",textAlign:"center",children:"Price"}),e.jsx(d,{minWidth:"90px",children:e.jsx(W,{children:"Info on iracing.com"})})]})})}function Fe({price:n,...r}){return n>0?e.jsxs(v,{colorPalette:"orange",...r,children:[e.jsx(h,{icon:$,size:"xs"}),e.jsx(We,{value:n,style:"currency",currency:"USD"})]}):e.jsx(v,{colorPalette:"green",...r,children:"Free"})}function Be({content:n,id:r}){const t=n==="cars"?oe[r.toString()]:ce[r.toString()],{favoriteSeries:x}=le(),u=(t.skuSeries?t.skuSeries:t.series)||[];return e.jsx(xe,{width:"100%",maxH:"320px",children:e.jsx(de,{size:"sm",striped:!0,children:e.jsx(he,{fontSize:"xs",children:e.jsx(E,{each:u,children:i=>{const a=ue[i.toString()];return a&&e.jsxs(z,{bgColor:"transparent",children:[e.jsx(c,{w:"20px",textAlign:"center",p:0,borderBottom:0,px:"4px",children:e.jsx(ee,{size:"xs",mt:"4px",checked:x.includes(i),onCheckedChange:({checked:o})=>pe(a.id,!!o)})}),e.jsx(c,{width:"100%",display:"flex",alignItems:"center",p:0,borderBottom:0,px:"4px",fontWeight:"bold",maxW:"264px",children:e.jsx(y,{truncate:!0,children:a.name})}),e.jsx(c,{w:"20px",p:0,borderBottom:0,px:"4px",paddingInline:0,children:e.jsx(se,{letter:a.license.letter,color:a.license.color,size:"xs",children:a.license.letter})})]},i)}})})})})}function De({href:n}){return e.jsxs(ve,{colorPalette:"blue",size:"xs",p:"0 8px",height:"24px",as:"a",href:n,target:"_blank",rel:"noreferrer",children:[e.jsx(h,{icon:U}),e.jsxs("span",{children:["Info",e.jsx(h,{icon:V,size:"xs"})]})]})}function Ee({content:n,id:r,sku:t,price:x,name:u,logo:i,categories:a,free:o,skuGroup:g,series:C,skuIcon:f,infoUrl:j,owned:m,wish:p}){const[S,b]=n==="cars"?[fe,Se]:[be,ke];return e.jsxs(z,{bgColor:"transparent",children:[e.jsx(c,{minWidth:"40px",textAlign:"center",children:e.jsx(G,{readOnly:o,colorPalette:o?"green":p?"blue":void 0,checked:o||m||p,controlProps:{borderColor:!o&&!p&&!m?"gray.400":void 0},icon:o?e.jsx(h,{size:"xs",icon:J}):p?e.jsx(h,{size:"xs",icon:Ae}):void 0,onClick:l=>l.stopPropagation(),onCheckedChange:()=>{m?(S(t,!1),b(t,!0)):p?b(t,!1):S(t,!0)}})}),e.jsx(c,{minWidth:"60px",textAlign:"center",children:i&&e.jsx(ne,{children:e.jsx(P,{lazyMount:!0,unmountOnExit:!0,content:e.jsx(R,{userSelect:"none",draggable:!1,h:"80px",w:"160px",fit:"contain",src:`${B.image}${i}`}),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(R,{userSelect:"none",draggable:!1,h:"24px",fit:"contain",src:`${B.image}${i}`})},i)})}),e.jsx(c,{width:"100%",children:e.jsx(Te,{name:u})}),e.jsx(c,{minWidth:"90px",textAlign:"center",children:g&&e.jsx(P,{lazyMount:!0,unmountOnExit:!0,content:g.map(l=>e.jsx(y,{as:"p",children:l},l)),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsxs(v,{variant:"solid",_light:{bg:"gray.600"},children:[e.jsx(h,{icon:f,size:"sm"}),g.length]})})}),e.jsx(c,{minWidth:"90px",textAlign:"center",children:C&&e.jsxs(ge,{lazyMount:!0,unmountOnExit:!0,children:[e.jsx(je,{asChild:!0,children:e.jsxs(D,{gap:1,justifyContent:"center",cursor:"pointer",children:[e.jsx(h,{icon:K}),C.length,e.jsx(h,{icon:X})]})}),e.jsxs(me,{p:2,children:[e.jsx(Ce,{}),e.jsx(Be,{id:r,content:n})]})]})}),e.jsx(c,{minWidth:"90px",textAlign:"center",children:e.jsx(E,{each:a,children:(l,k)=>e.jsx(P,{lazyMount:!0,unmountOnExit:!0,content:Q[l],showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(Pe,{fontSize:"16px",ml:k>0?"6px":void 0,category:l})},`${l}`)})}),e.jsx(c,{minWidth:"90px",textAlign:"center",children:e.jsx(Fe,{price:x})}),e.jsx(c,{minWidth:"90px",textAlign:"end",children:e.jsx(De,{href:j})})]})}const Me=q.memo(Ee);function qe({allTab:n,content:r,contentListJson:t,description:x,freeCount:u,infoUrl:i,myContent:a,skuIcon:o,tabs:g,title:C,wish:f}){const[j,m]=w.useState(n),[p,S]=w.useState(""),[b,l]=w.useState(t),k=te(p,500);return w.useEffect(()=>{const s=j===n?t:t.filter(T=>T.categories.some(O=>g[O]===j)),I=k.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),M=I?s.filter(T=>T.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(I)):s;l(M)},[k,j]),e.jsxs(Y,{direction:"column",height:"100%",width:"100%",gap:"8px",children:[e.jsx(Ie,{freeCount:u,ownedCount:a.length??0,wishCount:f.length??0,title:C,description:x}),e.jsx(ze,{hideFrom:"md"}),e.jsx(re,{tabs:g,tab:j,onTabChange:m,onSearchChange:S}),e.jsx(Re,{list:b,rows:s=>e.jsx(Me,{id:s.id,sku:s.sku,content:r,infoUrl:i(s.id),skuIcon:o,price:s.price,name:s.name,logo:s.logo,categories:s.categories,free:s.free,skuGroup:s.skuGroup?Object.values(s.skuGroup):void 0,series:s.skuSeries?s.skuSeries:s.series,owned:a.includes(s.sku),wish:f.includes(s.sku)},s.id)})]})}export{qe as C};
