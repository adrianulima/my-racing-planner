import{o as U,x as R,j as e,X as V,n as v,k as d,ad as q,u as X,F as L,N as J,W as K,ae as Q,U as G,R as Y,T as W,D as O,H as Z,af as ee,z as ne,Q as se,r as S,ag as te,ah as re}from"./index-dZzmvU5g.js";import{I as ie,S as oe,L as ae,C as ce,u as le,a as xe}from"./star-checkbox-l1JkQjv2.js";import{T as de,c as he,d as N,j as B,h as x,C as ue,e as pe,m as ge,n as je,p as fe,S as me,k as o,l as Ce,I as M,P as Se,a as be,b as ke,g as we,q as ye,f as Te}from"./content-checkbox-Dn63vLpE.js";import{B as D,C as Ae}from"./checkbox-B-QTHQeG.js";import{V as _,C as ze}from"./content-name-badge-C1L9RK7K.js";import{C as We}from"./icons-ZJGwZwby.js";import{F as ve}from"./index-CTYY_hqn.js";function Ie({...s}){const[t,r]=U(),h=t===R.MyCars?"Cars":"Tracks";return e.jsx(V,{...s,children:e.jsx(de,{size:"sm",variant:"enclosed",width:"100%",flex:1,value:h,onValueChange:u=>r(u.value==="Cars"?R.MyCars:R.MyTracks),children:e.jsxs(he,{flex:1,width:"100%",children:[e.jsx(N,{value:"Cars",width:"100%",children:e.jsx(v,{textWrap:"nowrap",userSelect:"none",children:"Cars"})}),e.jsx(N,{value:"Tracks",width:"100%",children:e.jsx(v,{textWrap:"nowrap",userSelect:"none",children:"Tracks"})})]})})})}function Fe({list:s,rows:t,filterButton:r}){return e.jsx(ie,{list:s,rows:t,cols:8,children:e.jsxs(B,{bgColor:"bg.muted",children:[e.jsx(x,{minWidth:"40px",textAlign:"center",children:r}),e.jsx(x,{minWidth:"60px",textAlign:"center",children:e.jsx(_,{children:"Content Logo"})}),e.jsx(x,{width:"100%",children:"Name"}),e.jsx(x,{minWidth:"90px",textAlign:"center",children:"Includes"}),e.jsx(x,{minWidth:"90px",textAlign:"center",children:"Series"}),e.jsx(x,{minWidth:"90px",textAlign:"center",children:"Category"}),e.jsx(x,{minWidth:"90px",textAlign:"center",children:"Price"}),e.jsx(x,{minWidth:"90px",children:e.jsx(_,{children:"Info on iracing.com"})})]})})}function Pe({price:s,...t}){return s>0?e.jsxs(D,{colorPalette:"orange",...t,children:[e.jsx(d,{icon:q,size:"xs"}),e.jsx(ve,{value:s,style:"currency",currency:"USD"})]}):e.jsx(D,{colorPalette:"green",...t,children:"Free"})}function Re({content:s,id:t}){const r=s==="cars"?ue[t.toString()]:pe[t.toString()],{favoriteSeries:h}=X(),u=(r.skuSeries?r.skuSeries:r.series)||[];return e.jsx(ge,{width:"100%",maxH:"320px",children:e.jsx(je,{size:"sm",striped:!0,children:e.jsx(fe,{fontSize:"xs",children:e.jsx(L,{each:u,children:a=>{const i=me[a.toString()];return i&&e.jsxs(B,{bgColor:"transparent",children:[e.jsx(o,{w:"20px",textAlign:"center",p:0,borderBottom:0,px:"4px",children:e.jsx(oe,{size:"xs",mt:"4px",checked:h.includes(a),onCheckedChange:({checked:f})=>J(i.id,!!f)})}),e.jsx(o,{width:"100%",display:"flex",alignItems:"center",p:0,borderBottom:0,px:"4px",fontWeight:"bold",maxW:"264px",children:e.jsx(v,{truncate:!0,children:i.name})}),e.jsx(o,{w:"20px",p:0,borderBottom:0,px:"4px",paddingInline:0,children:e.jsx(ae,{letter:i.license.letter,color:i.license.color,size:"xs",children:i.license.letter})})]},a)}})})})})}function De({href:s}){return e.jsxs(K,{colorPalette:"blue",size:"xs",p:"0 8px",height:"24px",as:"a",href:s,target:"_blank",rel:"noreferrer",children:[e.jsx(d,{icon:Q}),e.jsxs("span",{children:["Info",e.jsx(d,{icon:G,size:"xs"})]})]})}function Be({content:s,id:t,sku:r,price:h,name:u,logo:a,categories:i,free:f,skuGroup:g,series:b,skuIcon:m,infoUrl:j,owned:I,wish:k}){const w=g?Object.values(g):[];return e.jsxs(B,{bgColor:"transparent",children:[e.jsx(o,{minWidth:"40px",textAlign:"center",children:e.jsx(Ce,{content:s,contentId:t,sku:r,free:f,owned:I,wish:k})}),e.jsx(o,{minWidth:"60px",textAlign:"center",children:a&&e.jsx(ce,{children:e.jsx(W,{lazyMount:!0,unmountOnExit:!0,content:e.jsx(O,{loading:"lazy",userSelect:"none",draggable:!1,h:"80px",w:"160px",fit:"contain",src:`${M.image}${a}`}),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(O,{loading:"lazy",userSelect:"none",draggable:!1,h:"24px",fit:"contain",src:`${M.image}${a}`})},a)})}),e.jsx(o,{width:"100%",children:e.jsx(ze,{name:u})}),e.jsx(o,{minWidth:"90px",textAlign:"center",children:g&&e.jsx(W,{lazyMount:!0,unmountOnExit:!0,content:w.map(c=>e.jsx(v,{as:"p",children:c},c)),showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsxs(D,{variant:"solid",_light:{bg:"gray.600"},children:[e.jsx(d,{icon:m,size:"sm"}),w.length]})})}),e.jsx(o,{minWidth:"90px",textAlign:"center",children:b&&e.jsxs(Se,{lazyMount:!0,unmountOnExit:!0,children:[e.jsx(be,{asChild:!0,children:e.jsxs(Z,{gap:1,justifyContent:"center",cursor:"pointer",children:[e.jsx(d,{icon:ee}),b.length,e.jsx(d,{icon:ne})]})}),e.jsxs(ke,{p:2,children:[e.jsx(we,{}),e.jsx(Re,{id:t,content:s})]})]})}),e.jsx(o,{minWidth:"90px",textAlign:"center",children:e.jsx(L,{each:i,children:(c,F)=>e.jsx(W,{lazyMount:!0,unmountOnExit:!0,content:se[c],showArrow:!0,positioning:{placement:"top"},openDelay:200,closeDelay:100,children:e.jsx(We,{fontSize:"16px",ml:F>0?"6px":void 0,category:c})},`${c}`)})}),e.jsx(o,{minWidth:"90px",textAlign:"center",children:e.jsx(Pe,{price:h})}),e.jsx(o,{minWidth:"90px",textAlign:"end",children:e.jsx(De,{href:j})})]})}const Ee=Y.memo(Be);function Ue({allTab:s,content:t,contentListJson:r,description:h,freeCount:u,infoUrl:a,myContent:i,skuIcon:f,tabs:g,title:b,wish:m}){const[j,I]=S.useState(s),[k,w]=S.useState(""),[c,F]=S.useState(r),[l,y]=S.useState(0),P=l===3,T=l===2,A=l===1,E=le(k,500);return S.useEffect(()=>{const n=j===s?r:r.filter(p=>p.categories.some($=>g[$]===j)),C=l!==0?n.filter(p=>{if(l===1)return p.free;if(l===2)return m.includes(p.sku);if(l===3)return i.includes(p.sku)}):n,z=E.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),H=z?C.filter(p=>p.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(z)):C;F(H)},[E,j,l]),e.jsxs(ye,{children:[e.jsx(Te,{freeCount:u,ownedCount:i.length??0,wishCount:m.length??0,title:b,description:h,children:e.jsx(Ie,{hideFrom:"md"})}),e.jsx(xe,{tabs:g,tab:j,onTabChange:I,search:k,onSearchChange:w}),e.jsx(Fe,{filterButton:e.jsx(W,{lazyMount:!0,unmountOnExit:!0,content:"Filter content by checkbox state",showArrow:!0,openDelay:200,closeDelay:100,ids:{trigger:"checkFilter"},children:e.jsx(Ae,{ids:{root:"checkFilter"},checked:A||P||T,controlProps:{bgColor:A||P||T?{_hover:"fg",base:"gray.400"}:void 0,borderColor:{_hover:"fg",base:"gray.400"}},icon:A?e.jsx(d,{size:"xs",icon:te}):T?e.jsx(d,{size:"xs",icon:re}):void 0,onClick:n=>n.stopPropagation(),onCheckedChange:()=>{y(P?2:T?1:A?0:3)}})}),list:c,rows:n=>{const C=i.includes(n.sku),z=!C&&m.includes(n.sku);return e.jsx(Ee,{id:n.id,sku:n.sku,content:t,infoUrl:a(n.id),skuIcon:f,price:n.price,name:n.name,logo:n.logo,categories:n.categories,free:n.free,skuGroup:n.skuGroup,series:n.skuSeries?n.skuSeries:n.series,owned:C,wish:z},n.id)}})]})}export{Ue as C};
